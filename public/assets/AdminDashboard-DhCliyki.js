import{j as e,r as o,s as m,u as S}from"./index-BuJGo2UX.js";import{u as A}from"./useSystemBrain-CQSE7dNH.js";const g=({title:l,value:t,subtitle:i,trend:a,trendValue:r,icon:n,color:d})=>e.jsxs("div",{className:"p-6 bg-[#0a0a0a] border border-white/5 rounded-xl relative overflow-hidden group",children:[e.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${d}`}),e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-1",children:l}),e.jsx("div",{className:"text-3xl font-black text-white",children:t})]}),e.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/5 flex items-center justify-center text-xl",children:n})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsxs("span",{className:`${a==="up"?"text-green-500":"text-red-500"} font-bold flex items-center`,children:[a==="up"?"‚Üó":"‚Üò"," ",r]}),e.jsx("span",{className:"text-slate-600 font-medium",children:i})]})]}),b=({severity:l,message:t,time:i,source:a})=>e.jsxs("div",{className:`flex items-center justify-between p-3 border-l-2 ${l==="critical"?"border-red-500 bg-red-500/5":l==="warning"?"border-orange-500 bg-orange-500/5":"border-blue-500 bg-blue-500/5"} mb-2`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`text-xs font-bold uppercase ${l==="critical"?"text-red-500":l==="warning"?"text-orange-500":"text-blue-500"}`,children:l}),e.jsx("span",{className:"text-sm text-slate-300",children:t})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 font-mono",children:[e.jsx("span",{children:a}),e.jsx("span",{children:i})]})]}),R=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(g,{title:"Danger Score Moyen",value:"64/100",subtitle:"vs 58 hier",trend:"up",trendValue:"+10%",icon:"üî•",color:"bg-orange-500"}),e.jsx(g,{title:"CA √† Risque (Actif)",value:"420k‚Ç¨",subtitle:"24 opportunit√©s",trend:"up",trendValue:"+12%",icon:"üìâ",color:"bg-red-500"}),e.jsx(g,{title:"Opportunit√©s Death Zone",value:"8",subtitle:"Aucune action > 5j",trend:"up",trendValue:"+2",icon:"‚ò†Ô∏è",color:"bg-slate-500"}),e.jsx(g,{title:"Taux d'Inaction",value:"12%",subtitle:"Recommandations ignor√©es",trend:"down",trendValue:"-2%",icon:"üí§",color:"bg-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 h-[500px]",children:[e.jsxs("div",{className:"lg:col-span-2 bg-[#0a0a0a] border border-white/5 rounded-xl p-6 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-sm font-bold text-white uppercase tracking-widest flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),"Alertes Syst√®me Temps R√©el"]}),e.jsx("button",{className:"text-xs text-slate-500 hover:text-white uppercase font-bold",children:"Voir tout"})]}),e.jsxs("div",{className:"flex-1 overflow-auto pr-2 space-y-1",children:[e.jsx(b,{severity:"critical",message:"Agent Zero : Incoh√©rence d√©tect√©e sur Dossier #22910 (Refus vs Int√©r√™t)",source:"AGENT-ZERO",time:"10:42:01"}),e.jsx(b,{severity:"warning",message:"Fatigue Guard : Client DURAND activ√© (4 relances en 24h)",source:"OPS-GUARD",time:"10:38:15"}),e.jsx(b,{severity:"info",message:"Sync Salesforce : Latence √©lev√©e (450ms)",source:"CRM-CONNECTOR",time:"10:35:00"}),e.jsx(b,{severity:"warning",message:"R√®gle d'Inaction : 3 Commerciaux n'ont pas ouvert le Cockpit ce matin",source:"SUPERVISOR",time:"09:00:00"}),e.jsx(b,{severity:"critical",message:"Ops Audit : Tentative d'acc√®s hors plage horaire (User: M.Martin)",source:"SECURITY",time:"03:15:22"}),e.jsx(b,{severity:"info",message:"Backup : Sauvegarde nocturne effectu√©e avec succ√®s",source:"SYSTEM",time:"03:00:00"})]})]}),e.jsxs("div",{className:"bg-[#0a0a0a] border border-white/5 rounded-xl p-6",children:[e.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest mb-6",children:"Sant√© des Agents"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold mb-2",children:[e.jsx("span",{className:"text-blue-400",children:"AGENT ZERO (Cerveau)"}),e.jsx("span",{className:"text-green-500",children:"OPTIMAL"})]}),e.jsx("div",{className:"w-full bg-white/5 rounded-full h-1.5",children:e.jsx("div",{className:"bg-blue-500 h-1.5 rounded-full",style:{width:"98%"}})}),e.jsx("div",{className:"text-[10px] text-slate-500 mt-1",children:"Latence 120ms ‚Ä¢ 99.9% Confidence"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold mb-2",children:[e.jsx("span",{className:"text-green-400",children:"OPS AGENT (Gardien)"}),e.jsx("span",{className:"text-green-500",children:"ACTIF"})]}),e.jsx("div",{className:"w-full bg-white/5 rounded-full h-1.5",children:e.jsx("div",{className:"bg-green-500 h-1.5 rounded-full",style:{width:"100%"}})}),e.jsx("div",{className:"text-[10px] text-slate-500 mt-1",children:"0 Failles ‚Ä¢ 142 Blocages/jour"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold mb-2",children:[e.jsx("span",{className:"text-orange-400",children:"EMAIL ENGINE"}),e.jsx("span",{className:"text-orange-500",children:"BUSY"})]}),e.jsx("div",{className:"w-full bg-white/5 rounded-full h-1.5",children:e.jsx("div",{className:"bg-orange-500 h-1.5 rounded-full",style:{width:"85%"}})}),e.jsx("div",{className:"text-[10px] text-slate-500 mt-1",children:"Queue: 42 emails ‚Ä¢ Deliverability 99%"})]})]}),e.jsx("div",{className:"mt-8 pt-8 border-t border-white/10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-black text-white mb-1",children:"99.8%"}),e.jsx("div",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:"Uptime Syst√®me (30j)"})]})})]})]})]}),w=[{id:1,name:"Nicolas D.",role:"SUPER ADMIN",region:"Global",active:!0,share:.35},{id:2,name:"Sarah M.",role:"MANAGER",region:"IDF / Nord",active:!0,share:.25},{id:3,name:"Thomas B.",role:"COMMERCIAL",region:"PACA",active:!1,share:0},{id:4,name:"Julie R.",role:"COMMERCIAL",region:"Rh√¥ne-Alpes",active:!0,share:.3},{id:5,name:"Eric P.",role:"AUDITEUR",region:"Interne",active:!1,share:0}],k=({user:l,onClose:t,onSave:i})=>{const[a,r]=o.useState({...l});return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-[#0f172a] border border-white/10 rounded-2xl w-[500px] shadow-2xl p-6 space-y-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"√âditer Utilisateur"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Nom"}),e.jsx("input",{type:"text",value:a.name,onChange:n=>r({...a,name:n.target.value}),className:"w-full bg-black/20 border border-white/10 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"R√¥le"}),e.jsxs("select",{value:a.role,onChange:n=>r({...a,role:n.target.value}),className:"w-full bg-black/20 border border-white/10 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500",children:[e.jsx("option",{value:"SUPER ADMIN",children:"SUPER ADMIN"}),e.jsx("option",{value:"MANAGER",children:"MANAGER"}),e.jsx("option",{value:"COMMERCIAL",children:"COMMERCIAL"}),e.jsx("option",{value:"AUDITEUR",children:"AUDITEUR"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"R√©gion"}),e.jsx("input",{type:"text",value:a.region,onChange:n=>r({...a,region:n.target.value}),className:"w-full bg-black/20 border border-white/10 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Statut Actif"}),e.jsx("button",{onClick:()=>r({...a,active:!a.active}),className:`w-12 h-6 rounded-full transition-colors relative ${a.active?"bg-green-500":"bg-slate-700"}`,children:e.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${a.active?"left-7":"left-1"}`})}),e.jsx("span",{className:"text-xs text-white",children:a.active?"Oui":"Non"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-white/5",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-slate-400 hover:text-white text-sm font-bold",children:"Annuler"}),e.jsx("button",{onClick:()=>i(a),className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-bold shadow-lg shadow-blue-500/20",children:"Sauvegarder"})]})]})})},E=()=>{const{studies:l}=A(),t=o.useMemo(()=>{const s=new Date;return l.filter(c=>{if(!c.signed_at||["cancelled","refused"].includes(c.status))return!1;const x=new Date(c.signed_at);return x.getMonth()===s.getMonth()&&x.getFullYear()===s.getFullYear()}).reduce((c,x)=>c+(x.total_price||0),0)},[l]),[i,a]=o.useState(()=>w.map(s=>({...s,role:s.role,rawImpact:s.active?t*s.share:0,impact:s.active?`${Math.round(t*s.share/1e3)}k`:"-",trend:s.active?`+${Math.floor(Math.random()*15)+5}%`:"-"}))),[r,n]=o.useState(null);o.useMemo(()=>{a(s=>s.map(c=>{const x=w.find(p=>p.id===c.id),u=x?x.share:0;return{...c,rawImpact:c.active?t*u:0,impact:c.active?`${Math.round(t*u/1e3)}k`:"-"}}))},[t]);const d=s=>{a(i.map(c=>c.id===s.id?s:c)),n(null)};return e.jsxs("div",{className:"space-y-6 relative",children:[r&&e.jsx(k,{user:r,onClose:()=>n(null),onSave:d}),e.jsxs("div",{className:"flex justify-between items-center bg-[#0a0a0a] border border-white/5 p-4 rounded-xl",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"text-center px-4 border-r border-white/5",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:i.filter(s=>s.role==="SUPER ADMIN").length}),e.jsx("div",{className:"text-[10px] uppercase text-slate-500 tracking-widest",children:"Admins"})]}),e.jsxs("div",{className:"text-center px-4 border-r border-white/5",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:i.filter(s=>s.role==="MANAGER").length}),e.jsx("div",{className:"text-[10px] uppercase text-slate-500 tracking-widest",children:"Managers"})]}),e.jsxs("div",{className:"text-center px-4",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:i.filter(s=>s.role==="COMMERCIAL").length}),e.jsx("div",{className:"text-[10px] uppercase text-slate-500 tracking-widest",children:"Commerciaux"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Revenue Mois"}),e.jsxs("div",{className:"text-xl font-black text-white font-mono",children:[Math.round(t/1e3)," k‚Ç¨"]})]}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-xs font-bold uppercase tracking-wider",children:"+ Nouvel Utilisateur"})]})]}),e.jsx("div",{className:"bg-[#0a0a0a] border border-white/5 rounded-xl overflow-hidden",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-white/5 text-[10px] uppercase font-bold text-slate-500 tracking-widest border-b border-white/5",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-4",children:"Utilisateur"}),e.jsx("th",{className:"py-3 px-4",children:"Region"}),e.jsx("th",{className:"py-3 px-4",children:"Statut"}),e.jsx("th",{className:"py-3 px-4",children:"Impact CA (Mois)"}),e.jsx("th",{className:"py-3 px-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{children:i.map(s=>e.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-xs ${s.role==="SUPER ADMIN"?"bg-orange-500/20 text-orange-500":s.role==="MANAGER"?"bg-blue-500/20 text-blue-500":"bg-slate-500/20 text-slate-500"}`,children:s.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white text-sm font-bold",children:s.name}),e.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-wider",children:s.role})]})]})}),e.jsx("td",{className:"py-4 px-4 text-sm text-slate-400 font-mono",children:s.region}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${s.active?"bg-green-500":"bg-slate-500"}`}),e.jsx("span",{className:"text-xs text-slate-400",children:s.active?"En ligne":"Inactif"})]})}),e.jsxs("td",{className:"py-4 px-4",children:[e.jsxs("div",{className:"text-sm font-bold text-white",children:[s.impact,"‚Ç¨"]}),e.jsxs("div",{className:`text-[10px] font-bold ${s.trend.startsWith("+")?"text-green-500":"text-slate-500"}`,children:[s.trend," vs M-1"]})]}),e.jsx("td",{className:"py-4 px-4 text-right",children:e.jsx("button",{onClick:()=>n(s),className:"text-slate-500 hover:text-white px-3 py-1 text-xs border border-white/10 hover:border-white/30 rounded",children:"√âditer"})})]},s.id))})]})})]})},f=({title:l,description:t,children:i})=>e.jsxs("div",{className:"bg-[#0a0a0a] border border-white/5 rounded-xl p-6 mb-6",children:[e.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest mb-1",children:l}),e.jsx("p",{className:"text-xs text-slate-500 mb-6 max-w-2xl",children:t}),e.jsx("div",{className:"space-y-8",children:i})]}),j=({label:l,value:t,min:i,max:a,unit:r,description:n,onChange:d})=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-300",children:l}),e.jsxs("span",{className:"text-sm font-bold text-orange-500",children:[t,r]})]}),e.jsx("input",{type:"range",min:i,max:a,value:t,onChange:s=>d(parseInt(s.target.value)),className:"w-full h-2 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-orange-500"}),e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-600 mt-1 font-mono uppercase",children:[e.jsxs("span",{children:["Min: ",i,r]}),e.jsxs("span",{children:["Max: ",a,r]})]}),n&&e.jsx("p",{className:"text-xs text-slate-500 mt-2 italic border-l-2 border-slate-700 pl-3",children:n})]}),y=({label:l,checked:t,onChange:i,help:a})=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg border border-white/5",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-slate-200",children:l}),a&&e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:a})]}),e.jsx("button",{onClick:()=>i(!t),className:`w-12 h-6 rounded-full p-1 transition-colors ${t?"bg-orange-600":"bg-slate-700"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full transition-transform ${t?"translate-x-6":"translate-x-0"}`})})]}),C=()=>{const[l,t]=o.useState(70),[i,a]=o.useState(40),[r,n]=o.useState(30),[d,s]=o.useState(30),[c,x]=o.useState(!1),[u,p]=o.useState(!0);return e.jsxs("div",{className:"max-w-4xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Configuration du Moteur"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Chaque modification est journalis√©e dans l'Audit Trail (Forensique)."})]}),e.jsxs("button",{className:"px-6 py-3 bg-white/10 hover:bg-white/20 text-white font-bold rounded-lg uppercase text-xs tracking-wider transition-all border border-white/10 flex items-center gap-2",children:[e.jsx("span",{children:"‚Ü∫"})," Annuler modifications"]})]}),e.jsx(f,{title:"Seuils de Tol√©rance (Danger Score)",description:"D√©finissez √† partir de quel score une opportunit√© bascule en zone critique.",children:e.jsx(j,{label:"Seuil d'Alerte Critique (Zone de Mort)",value:l,min:50,max:95,unit:"/100",onChange:t,description:"Si le score d√©passe cette valeur, l'opportunit√© passe en priorit√© absolue et alerte le N+1."})}),e.jsxs(f,{title:"Pond√©ration des Signaux (Total = 100%)",description:"Influence relative de chaque dimension sur le calcul du score final.",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsx(j,{label:"Comportemental",value:i,min:0,max:100,unit:"%",onChange:a}),e.jsx(j,{label:"Financier (ROI)",value:r,min:0,max:100,unit:"%",onChange:n}),e.jsx(j,{label:"Temporel (R√©cence)",value:d,min:0,max:100,unit:"%",onChange:s})]}),i+r+d!==100&&e.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-500 text-red-500 text-xs font-bold rounded mt-4 flex items-center gap-2",children:["‚ö†Ô∏è Le total des pond√©rations doit √™tre √©gal √† 100% (Actuel : ",i+r+d,"%)"]})]}),e.jsx(f,{title:"R√®gles d'Orchestration",description:"Comportements globaux de l'IA et de l'Agent Zero.",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(y,{label:"Mode Strict (Gouvernance)",checked:u,onChange:p,help:"Si activ√©, aucune action n'est permise sans validation Ops."}),e.jsx(y,{label:"Auto-Archivage > 30j",checked:c,onChange:x,help:"Archive automatiquement les leads sans interaction depuis 30 jours."})]})}),e.jsxs("div",{className:"sticky bottom-6 bg-[#0a0a0a]/90 backdrop-blur-xl border border-orange-500/30 p-4 rounded-xl shadow-[0_0_50px_rgba(0,0,0,0.5)] flex justify-between items-center",children:[e.jsx("div",{className:"text-xs text-orange-500 font-mono",children:"‚ö†Ô∏è Vous √™tes sur le point de modifier la politique de risque globale."}),e.jsx("button",{className:"px-8 py-3 bg-orange-600 hover:bg-orange-500 text-white font-bold rounded-lg shadow-lg shadow-orange-600/20 transform hover:-translate-y-1 transition-all",children:"APPLIQUER LA POLITIQUE"})]})]})},v=({name:l,status:t,role:i,uptime:a,latency:r,requests:n,logs:d})=>e.jsxs("div",{className:"bg-[#0a0a0a] border border-white/5 rounded-xl p-6 flex flex-col h-full relative overflow-hidden",children:[t==="error"&&e.jsx("div",{className:"absolute top-0 right-0 p-2 bg-red-500 text-white text-[10px] font-bold uppercase tracking-widest",children:"Incident"}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-2xl border ${t==="active"?"bg-green-500/10 border-green-500/20 text-green-500":t==="warning"?"bg-orange-500/10 border-orange-500/20 text-orange-500":"bg-red-500/10 border-red-500/20 text-red-500 animate-pulse"}`,children:i==="brain"?"üß†":i==="guard"?"üõ°Ô∏è":"‚úâÔ∏è"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white text-lg",children:l}),e.jsx("div",{className:`text-[10px] uppercase font-bold tracking-widest ${t==="active"?"text-green-500":t==="warning"?"text-orange-500":"text-red-500"}`,children:t==="active"?"‚óè Op√©rationnel":t==="warning"?"‚óè Instable":"‚óè Panne"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-6 text-center",children:[e.jsxs("div",{className:"p-2 bg-white/5 rounded-lg border border-white/5",children:[e.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-wider mb-1",children:"Uptime"}),e.jsx("div",{className:"text-white font-bold",children:a})]}),e.jsxs("div",{className:"p-2 bg-white/5 rounded-lg border border-white/5",children:[e.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-wider mb-1",children:"Latence"}),e.jsx("div",{className:"text-white font-bold",children:r})]}),e.jsxs("div",{className:"p-2 bg-white/5 rounded-lg border border-white/5",children:[e.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-wider mb-1",children:"Req/min"}),e.jsx("div",{className:"text-white font-bold",children:n})]})]}),e.jsxs("div",{className:"flex-1 bg-black/40 rounded-lg p-3 font-mono text-[10px] text-slate-400 overflow-hidden border border-white/5",children:[e.jsx("div",{className:"mb-2 text-slate-600 uppercase font-bold tracking-widest text-[9px]",children:"Live Logs"}),d.map((s,c)=>e.jsxs("div",{className:"truncate mb-1 hover:text-white cursor-default",children:[e.jsx("span",{className:"text-slate-600 mr-2 opacity-50",children:new Date().toLocaleTimeString()}),s]},c))]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-white/5 flex gap-2",children:[e.jsx("button",{className:"flex-1 py-2 bg-white/5 hover:bg-white/10 rounded-lg text-xs font-bold text-slate-300 uppercase",children:"Restart"}),e.jsx("button",{className:"flex-1 py-2 bg-white/5 hover:bg-white/10 rounded-lg text-xs font-bold text-slate-300 uppercase",children:"Config"})]})]}),I=()=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 h-[600px]",children:[e.jsx(v,{name:"AGENT ZERO",role:"brain",status:"active",uptime:"99.99%",latency:"124ms",requests:"420",logs:["[INFO] Processing batch #4402","[INFO] Decision: PRIORITY for Lead #9921","[DEBUG] Context updated (340ms)","[INFO] Syncing with Supabase..."]}),e.jsx(v,{name:"OPS GUARD",role:"guard",status:"active",uptime:"100%",latency:"12ms",requests:"1450",logs:["[SEC] Request from IP 192.168.1.42 authorized","[AUDIT] Blocked suspicious update on Lead #110","[INFO] Scanning for anomalies...","[SEC] Token validation OK"]}),e.jsx(v,{name:"EMAIL ENGINE",role:"worker",status:"warning",uptime:"98.5%",latency:"850ms",requests:"12",logs:["[WARN] SMTP Relay latency high (>500ms)","[INFO] Queue size: 45 emails","[INFO] Sending campaign batch #2","[ERROR] Timeout connecting to SMTP Provider 2"]})]}),M=({time:l,source:t,action:i,details:a,user:r,risk:n})=>e.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5 transition-colors group cursor-default text-xs",children:[e.jsx("td",{className:"py-2.5 px-4 font-mono text-slate-500 whitespace-nowrap",children:l}),e.jsx("td",{className:"py-2.5 px-4",children:e.jsx("span",{className:`inline-block px-1.5 py-0.5 rounded text-[9px] font-bold uppercase tracking-wider ${t==="SYSTEM"?"bg-blue-500/10 text-blue-500 border border-blue-500/20":t==="USER"?"bg-orange-500/10 text-orange-500 border border-orange-500/20":"bg-slate-500/10 text-slate-500 border border-slate-500/20"}`,children:t})}),e.jsx("td",{className:"py-2.5 px-4 font-bold text-slate-300",children:i}),e.jsx("td",{className:"py-2.5 px-4 text-slate-400 max-w-sm truncate group-hover:whitespace-normal group-hover:overflow-visible group-hover:bg-[#050505] group-hover:absolute group-hover:z-10 group-hover:border group-hover:border-white/10 group-hover:p-2 group-hover:rounded-lg group-hover:shadow-xl",children:a}),e.jsx("td",{className:"py-2.5 px-4 font-mono text-slate-500",children:r}),e.jsx("td",{className:"py-2.5 px-4 text-right",children:e.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${n==="high"?"bg-red-500":n==="medium"?"bg-orange-500":"bg-green-500/20"}`})})]}),T=()=>{const[l,t]=o.useState([]),[i,a]=o.useState(!0);return o.useEffect(()=>{(async()=>{const{data:d,error:s}=await m.from("decision_logs").select("*").order("created_at",{ascending:!1}).limit(100);d&&t(d),a(!1)})();const n=m.channel("realtime-logs").on("postgres_changes",{event:"INSERT",schema:"public",table:"decision_logs"},d=>{t(s=>[d.new,...s])}).subscribe();return()=>{m.removeChannel(n)}},[]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-4 p-4 bg-[#0a0a0a] border border-white/5 rounded-xl",children:[e.jsx("input",{type:"text",placeholder:"Rechercher (ID, User, Action)...",className:"bg-white/5 border border-white/5 rounded-lg px-4 py-2 text-sm text-white w-96 placeholder:text-slate-600 focus:outline-none focus:border-orange-500/50"}),e.jsxs("select",{className:"bg-white/5 border border-white/5 rounded-lg px-4 py-2 text-sm text-slate-400 focus:outline-none",children:[e.jsx("option",{children:"Tous les agents"}),e.jsx("option",{children:"Agent Zero"}),e.jsx("option",{children:"Ops Guard"})]}),e.jsxs("select",{className:"bg-white/5 border border-white/5 rounded-lg px-4 py-2 text-sm text-slate-400 focus:outline-none",children:[e.jsx("option",{children:"Tous les niveaux de risque"}),e.jsx("option",{children:"Critique"}),e.jsx("option",{children:"Warning"})]}),e.jsx("div",{className:"flex-1"}),e.jsxs("button",{onClick:()=>{const r=l.map(c=>Object.values(c).join(",")).join("\\n"),n=new Blob([r],{type:"text/csv"}),d=window.URL.createObjectURL(n),s=document.createElement("a");s.href=d,s.download=`audit_logs_${new Date().toISOString()}.csv`,s.click()},className:"px-4 py-2 bg-white/5 hover:bg-white/10 text-white rounded-lg text-xs font-bold uppercase tracking-wider flex items-center gap-2",children:[e.jsx("span",{children:"‚¨á"})," Export CSV"]})]}),e.jsx("div",{className:"bg-[#0a0a0a] border border-white/5 rounded-xl overflow-hidden font-mono min-h-[400px]",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-[#020202] text-[9px] uppercase font-bold text-slate-600 tracking-widest border-b border-white/5",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4 w-32",children:"Timestamp"}),e.jsx("th",{className:"py-2 px-4 w-24",children:"Source"}),e.jsx("th",{className:"py-2 px-4 w-48",children:"Action"}),e.jsx("th",{className:"py-2 px-4",children:"D√©tails de la d√©cision"}),e.jsx("th",{className:"py-2 px-4 w-32",children:"User / Agent"}),e.jsx("th",{className:"py-2 px-4 w-16 text-right",children:"Risk"})]})}),e.jsx("tbody",{children:i?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-10 text-slate-500 animate-pulse",children:"Chargement des logs..."})}):l.map(r=>{var n,d,s;return e.jsx(M,{time:new Date(r.created_at).toLocaleTimeString("fr-FR"),source:(n=r.action_performed)!=null&&n.includes("SYSTEM")?"SYSTEM":"USER",action:r.action_performed,details:typeof r.justification=="object"?JSON.stringify(r.justification):r.justification,user:r.client_name||"N/A",risk:(d=r.action_performed)!=null&&d.includes("DELETE")||(s=r.action_performed)!=null&&s.includes("CANCEL")?"high":"low"},r.id)})})]})}),e.jsxs("div",{className:"text-center text-[10px] text-slate-600 uppercase font-bold tracking-widest mt-2",children:["Affichage des ",l.length," derniers √©v√©nements sur serveur s√©curis√©"]})]})},h=({name:l,status:t,lastSync:i,icon:a,color:r})=>e.jsxs("div",{className:"bg-[#0a0a0a] border border-white/5 rounded-xl p-6 flex flex-col justify-between h-48 group hover:border-white/10 transition-all relative overflow-hidden",children:[t==="active"&&e.jsx("div",{className:`absolute top-0 right-0 w-20 h-20 bg-${r}-500 blur-[80px] opacity-20 group-hover:opacity-30 transition-opacity`}),e.jsxs("div",{className:"flex justify-between items-start z-10",children:[e.jsx("div",{className:"w-12 h-12 bg-white/5 rounded-lg flex items-center justify-center text-2xl",children:a}),e.jsx("div",{className:`px-2 py-1 rounded text-[9px] font-bold uppercase tracking-widest ${t==="active"?"bg-green-500/10 text-green-500":"bg-slate-500/10 text-slate-500"}`,children:t==="active"?"Connected":"Inactive"})]}),e.jsxs("div",{className:"z-10",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:l}),e.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-2",children:[e.jsxs("span",{children:["Last Sync: ",i]}),t==="active"&&e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-white/5 z-10 flex gap-2",children:[e.jsx("button",{className:"text-xs text-slate-400 hover:text-white font-bold uppercase tracking-wider flex-1 text-left",children:"Configurer"}),e.jsx("button",{className:"text-xs text-slate-400 hover:text-white font-bold uppercase tracking-wider",children:"Logs"})]})]}),D=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest pl-1 border-l-4 border-orange-500",children:"Connecteurs CRM Actifs"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(h,{name:"Salesforce",status:"active",lastSync:"2 min ago",icon:"‚òÅÔ∏è",color:"blue"}),e.jsx(h,{name:"HubSpot",status:"active",lastSync:"5 min ago",icon:"üüß",color:"orange"}),e.jsx(h,{name:"Microsoft Dynamics",status:"inactive",lastSync:"Never",icon:"üî∑",color:"indigo"}),e.jsx(h,{name:"Pipedrive",status:"inactive",lastSync:"Never",icon:"üü¢",color:"green"})]}),e.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest pl-1 border-l-4 border-purple-500 pt-4",children:"Int√©grations IA & Data"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(h,{name:"Cortex AI (EDF Internal)",status:"active",lastSync:"Real-time",icon:"‚ö°",color:"blue"}),e.jsx(h,{name:"OpenAI GDP-4o",status:"active",lastSync:"Real-time",icon:"üß†",color:"purple"}),e.jsx(h,{name:"SendGrid (Email)",status:"active",lastSync:"30 sec ago",icon:"üìß",color:"cyan"})]})]}),N=({title:l,description:t,buttonLabel:i,warning:a,danger:r})=>e.jsxs("div",{className:`p-6 bg-[#0a0a0a] border ${r?"border-red-500/30":"border-white/5"} rounded-xl `,children:[e.jsx("h3",{className:`text-lg font-bold mb-2 ${r?"text-red-500":"text-white"}`,children:l}),e.jsx("p",{className:"text-sm text-slate-500 mb-6",children:t}),a&&e.jsxs("div",{className:"bg-orange-500/10 border border-orange-500/20 p-3 rounded mb-6 text-xs text-orange-400 font-mono",children:["‚ö†Ô∏è ",a]}),e.jsx("button",{className:`w-full py-3 rounded-lg font-bold uppercase tracking-wider text-xs transition-all ${r?"bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white border border-red-500":"bg-white/5 hover:bg-white/10 text-white border border-white/5"}`,children:i})]}),L=()=>{const[l,t]=o.useState(!1),[i,a]=o.useState(!0),[r,n]=o.useState(""),d=async()=>{n("Searching for Albertini...");try{const{data:s}=await m.from("clients").select("id").ilike("last_name","%Albertini%");if(!s||s.length===0){n("‚ùå Client Albertini not found");return}const c=s[0].id,{data:x}=await m.from("studies").select("*").eq("client_id",c).single();if(!x){n("‚ùå Study for Albertini not found");return}const u={...x.study_data,cancellation_reason:"Raison Technique / Toiture"},{error:p}=await m.from("studies").update({study_data:u}).eq("id",x.id);if(p)throw p;await m.from("decision_logs").insert({study_id:x.id,client_name:"Albertini",action_performed:"DATA_FIX_REASON",justification:"Correction manuelle: Raison Technique / Toiture"}),n('‚úÖ FIX APPLIED: Albertini updated to "Raison Technique"')}catch(s){n("‚ùå Error: "+s.message)}};return e.jsxs("div",{className:"max-w-5xl space-y-8",children:[e.jsxs("div",{className:"bg-orange-500/10 border border-orange-500 rounded-xl p-6 flex items-start gap-4",children:[e.jsx("span",{className:"text-3xl",children:"üõ°Ô∏è"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-orange-500 uppercase tracking-widest mb-2",children:"Zone de Maintenance Syst√®me"}),e.jsx("p",{className:"text-slate-300 text-sm",children:"Les actions ici impactent directement la production et la base de donn√©es. Toute op√©ration est loggu√©e avec votre ID session (Session #4402A)."})]})]}),e.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest pl-1 border-l-4 border-slate-500",children:"Modes de Fonctionnement"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-[#0a0a0a] border border-white/5 rounded-xl p-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white",children:"Shadow Brain (Lecture Seule)"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1 max-w-xs",children:"L'IA analyse mais ne prend aucune d√©cision ni action. Id√©al pour le debug."})]}),e.jsx("button",{onClick:()=>a(!i),className:`w-14 h-8 rounded-full p-1 transition-colors ${i?"bg-blue-600":"bg-slate-700"}`,children:e.jsx("div",{className:`w-6 h-6 bg-white rounded-full transition-transform ${i?"translate-x-6":"translate-x-0"}`})})]}),e.jsxs("div",{className:"bg-[#0a0a0a] border border-white/5 rounded-xl p-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white",children:"Safe Mode (Arr√™t d'Urgence)"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1 max-w-xs",children:"Bloque imm√©diatement tous les emails sortants et les mises √† jour CRM."})]}),e.jsx("button",{onClick:()=>t(!l),className:`w-14 h-8 rounded-full p-1 transition-colors ${l?"bg-red-600":"bg-slate-700"}`,children:e.jsx("div",{className:`w-6 h-6 bg-white rounded-full transition-transform ${l?"translate-x-6":"translate-x-0"}`})})]})]}),e.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest pl-1 border-l-4 border-blue-500 pt-8",children:"Corrections de Donn√©es (Legacy)"}),e.jsxs("div",{className:"bg-[#0a0a0a] border border-white/5 rounded-xl p-6 flex flex-col gap-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white",children:'Patch Dossier "Albertini"'}),e.jsx("p",{className:"text-xs text-slate-500 mt-1 max-w-md",children:'Le dossier a √©t√© annul√© avant la mise √† jour du motif. Ce patch force le motif "Raison Technique" pour corriger les stats Pilotage.'})]}),e.jsx("button",{onClick:d,className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg font-bold text-xs uppercase tracking-wider transition-all shadow-lg shadow-blue-500/20",children:"Appliquer Patch"})]}),r&&e.jsx("div",{className:`mt-2 p-3 rounded-lg border text-xs font-mono ${r.includes("‚úÖ")?"bg-green-500/10 border-green-500/20 text-green-400":"bg-red-500/10 border-red-500/20 text-red-400"}`,children:r})]}),e.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest pl-1 border-l-4 border-red-500 pt-8",children:"Actions Destructives"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(N,{title:"Purge Cache",description:"Vide le cache Redis et Force-Refresh de tous les clients connect√©s via WebSocket.",buttonLabel:"Vider le Cache"}),e.jsx(N,{title:"Reset √âtat Agents",description:"Red√©marre les instances d'Agent Zero et efface leur m√©moire court terme.",buttonLabel:"Red√©marrer Agents",warning:"Interruption de service ~30s"}),e.jsx(N,{title:"Nuke Database (Dev Only)",description:"Supprime toutes les tables et restaure le sch√©ma initial.",buttonLabel:"‚ò†Ô∏è NUKE DB",danger:!0,warning:"IRR√âVERSIBLE. PERTE TOTALE DES DONN√âES."})]})]})},_=()=>{const l=S(),[t,i]=o.useState("kpi"),a=({section:r,icon:n,label:d})=>e.jsxs("button",{onClick:()=>i(r),className:`w-full text-left px-4 py-3 rounded-lg flex items-center gap-3 transition-all ${t===r?"bg-[#f97316]/10 text-[#f97316] border border-[#f97316]/20 shadow-[0_0_15px_rgba(249,115,22,0.1)]":"text-slate-400 hover:bg-white/5 hover:text-white"}`,children:[e.jsx("span",{className:"text-xl",children:n}),e.jsx("span",{className:"font-medium text-sm tracking-wide",children:d})]});return e.jsxs("div",{className:"min-h-screen bg-[#02050a] flex text-slate-200 font-sans selection:bg-[#f97316]/30",children:[e.jsxs("aside",{className:"w-72 border-r border-white/5 flex flex-col bg-[#050505]",children:[e.jsx("div",{className:"p-6 border-b border-white/5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:e.jsx("img",{src:"/img/revenue-sentinel-logo.png",alt:"Revenue Sentinel",className:"w-full h-full object-contain drop-shadow-[0_0_8px_rgba(249,115,22,0.6)]"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-sm font-black text-white tracking-widest leading-none",children:["REVENUE ",e.jsx("span",{className:"text-orange-500",children:"SENTINEL"})]}),e.jsx("div",{className:"text-[10px] text-orange-500 font-bold uppercase tracking-widest mt-1",children:"Admin / Governance"})]})]})}),e.jsxs("nav",{className:"flex-1 p-4 space-y-1",children:[e.jsx("div",{className:"px-4 py-2 text-[10px] font-bold text-slate-600 uppercase tracking-widest mb-2",children:"Pilotage"}),e.jsx(a,{section:"kpi",icon:"üìä",label:"Dashboard Vital"}),e.jsx(a,{section:"users",icon:"üë•",label:"Utilisateurs BU"}),e.jsx("div",{className:"px-4 py-2 text-[10px] font-bold text-slate-600 uppercase tracking-widest mb-2 mt-6",children:"Moteur"}),e.jsx(a,{section:"engine",icon:"‚öôÔ∏è",label:"Param√®tres Scores"}),e.jsx(a,{section:"agents",icon:"ü§ñ",label:"Monitoring Agents"}),e.jsx(a,{section:"crm",icon:"üîå",label:"Int√©grations CRM"}),e.jsx("div",{className:"px-4 py-2 text-[10px] font-bold text-slate-600 uppercase tracking-widest mb-2 mt-6",children:"Risque & Audit"}),e.jsx(a,{section:"audit",icon:"üìú",label:"Logs Forensiques"}),e.jsx(a,{section:"maintenance",icon:"üõ†Ô∏è",label:"Maintenance"})]}),e.jsx("div",{className:"p-4 border-t border-white/5",children:e.jsxs("button",{onClick:()=>l("/dashboard"),className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg bg-white/5 hover:bg-white/10 text-slate-400 hover:text-white transition-all text-xs font-bold uppercase tracking-wider",children:[e.jsx("span",{children:"‚¨Ö"})," Retour Cockpit"]})})]}),e.jsxs("main",{className:"flex-1 overflow-auto bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-orange-900/10 via-[#02050a] to-[#02050a]",children:[e.jsxs("header",{className:"h-20 border-b border-white/5 flex items-center justify-between px-8 backdrop-blur-md sticky top-0 z-10",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white",children:[t==="kpi"&&"Signaux Vitaux du Syst√®me",t==="users"&&"Administration des √âquipes",t==="engine"&&"Param√®tres du Moteur",t==="agents"&&"Sant√© des Agents IA",t==="audit"&&"Audit Trail & Tracabilit√©",t==="crm"&&"Connecteurs Externes",t==="maintenance"&&"Maintenance Syst√®me"]}),e.jsx("p",{className:"text-sm text-slate-500",children:"Interface de gouvernance niveau COMEX - Acc√®s restreint"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-green-500/10 border border-green-500/20 rounded-full",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),e.jsx("span",{className:"text-xs font-bold text-green-500",children:"SYSTEM HEALTHY"})]})})]}),e.jsxs("div",{className:"p-8 max-w-[1600px] mx-auto",children:[t==="kpi"&&e.jsx(R,{}),t==="users"&&e.jsx(E,{}),t==="engine"&&e.jsx(C,{}),t==="agents"&&e.jsx(I,{}),t==="audit"&&e.jsx(T,{}),t==="crm"&&e.jsx(D,{}),t==="maintenance"&&e.jsx(L,{})]})]})]})};export{_ as default};
