ğŸ“• AGENT ZERO â€” BIBLE INTÃ‰GRALE CANONIQUE
Version Finale | Document de RÃ©fÃ©rence Absolu
Statut : GEL OFFICIEL â€” VERSION IMMUTABLE
ğŸ”’ AVERTISSEMENT CRITIQUE
âŒ Aucune rÃ©Ã©criture
âŒ Aucune synthÃ¨se
âŒ Aucune suppression
âŒ Aucune "amÃ©lioration"
Toute Ã©volution future se fera par documents annexes versionnÃ©s, jamais par modification de la Bible.
TABLE DES MATIÃˆRES COMPLÃˆTE
PARTIE 1 : FONDATIONS & PHILOSOPHIE
Section 0 : Intention Originelle
Section 1 : ProblÃ¨me Initial
Section 2 : DÃ©couverte Fondatrice
Section 3 : Principe SacrÃ© NÂ°1
PARTIE 2 : ARCHITECTURE & CONTRATS
Section 4 : Architecture Fondamentale
Section 5 : Contrat Fondateur â€” JSON Strict
Section 6 : INPUT â€” ProfileDetectionResult
Section 7 : OUTPUT â€” AgentDecision (DecisionPlan)
PARTIE 3 : RÃˆGLES & MOAT
Section 8 : RÃ¨gles Absolues
Section 9 : Erreur Majeure RencontrÃ©e
Section 61 : Historique DÃ©cisionnel des RÃ¨gles
PARTIE 4 : IMPLÃ‰MENTATION TECHNIQUE
Section 10 : Mode DÃ©gradÃ©
Section 11 : ImplÃ©mentation Locale â€” Python
Section 12 : API â€” api_decide.py
Section 13 : Front â€” EDF-DASHBOARD-TEST
Section 14 : RÃ´le du Front
PARTIE 5 : BUGS & PIÃˆGES RÃ‰ELS
Section 15 : Bugs & PiÃ¨ges RÃ©els RencontrÃ©s
Section 22 : Bug Majeur â€” Ports Zombies (macOS)
Section 53 : Erreurs RÃ©elles RencontrÃ©es (Liste)
PARTIE 6 : REPRODUCTIBILITÃ‰
Section 17 : ReproductibilitÃ© â€” Principe Non NÃ©gociable
Section 18 : Structure de RÃ©fÃ©rence (Canonique)
Section 19 : Agent Zero â€” Installation From Scratch (Python)
Section 20 : Variables d'Environnement
Section 21 : Lancement API Agent Zero
Section 23 : Front â€” EDF-DASHBOARD-TEST (Installation)
PARTIE 7 : CONNEXION & VALIDATION
Section 24 : Point de Connexion Front â†’ Agent Zero
Section 25 : Gestion des Erreurs
Section 26 : Test de Validation
PARTIE 8 : STRATÃ‰GIE & BUSINESS
Section 27 : Logique de Versioning
Section 28 : Raison Pour Laquelle C'est Incopiable
Section 29 : Erreurs Ã  Ne Jamais Refaire
Section 30 : Philosophie Finale
PARTIE 9 : WHITE-LABEL & LICENSING (Ã‰TAPE I)
Section 31 : Ã‰tape I â€” White-Label & Licensing
Section 32 : Architecture White-Label
Section 33 : Licensing â€” ModÃ¨le Ã‰conomique
Section 34 : Contrat de Licence
PARTIE 10 : LÃ‰GAL & CONFORMITÃ‰ (Ã‰TAPE J)
Section 35 : Ã‰tape J â€” LÃ©gal / Assurance / ConformitÃ©
Section 36 : AuditabilitÃ©
Section 37 : Assurance RC Pro â€” StratÃ©gie
Section 38 : PiÃ¨ge LÃ©gal Majeur Ã  Ã‰viter
PARTIE 11 : STRATÃ‰GIE GRANDS COMPTES (Ã‰TAPE K)
Section 39 : Ã‰tape K â€” StratÃ©gie Grands Comptes
Section 40 : Leur ProblÃ¨me RÃ©el
Section 41 : Discours Commercial
Section 42 : Proof of Value (POV)
PARTIE 12 : INDUSTRIALISATION (Ã‰TAPE H)
Section 43 : Industrialisation Multi-Industries
Section 44 : Plugins Industrie
Section 45 : Test de NeutralitÃ©
PARTIE 13 : OPÃ‰RATIONS & CRISE
Section 46 : SÃ©curitÃ© & ISO
Section 47 : Gestion des Erreurs Humaines
Section 62 : Runbook OpÃ©rationnel â€” Mode Panne & Crise
PARTIE 14 : GOUVERNANCE & TRANSMISSION
Section 48 : Point de Non-Retour StratÃ©gique
Section 49 : Ce Que Tu Ne Dois Jamais Faire
Section 50 : RÃ´le du Front Ã  Long Terme
Section 51 : Documentation Interne
Section 52 : StratÃ©gie d'Ã‰quipe Future
Section 63 : Transmission Ã  un Tiers
Section 64 : Gouvernance du Core
PARTIE 15 : PHILOSOPHIE DE LONGÃ‰VITÃ‰
Section 54 : Astuces Critiques
Section 55 : Pourquoi Tu As Raison d'ÃŠtre Exigeant
Section 65 : Philosophie de LongÃ©vitÃ© (10 ans)
Section 66 : DerniÃ¨re Page â€” Serment Architectural
PARTIE 16 : RÃ‰CAPITULATIFS & SYNTHÃˆSES
Section 56 : RÃ©cap Final
Section 57 : Si Tu Reviens Dans 1 An
Section 58 : Ce Document Est Une Arme
Section 59 : Prochaines Bibles Possibles
Section 60 : Fin (Pour l'Instant)
Section 67 : Statut Final
PARTIE 17 : Ã‰TAPES PRODUIT SAAS (E, F, G)
Ã‰tape E : Packager Agent Zero en Produit SaaS Vendable
Ã‰tape F : Certification Agent ZeroÂ®
Ã‰tape G : Pitch Deck Agent ZeroÂ®
PARTIE 18 : GUIDES TECHNIQUES COMPLETS
Guide PythonAnywhere (DÃ©ploiement)
Guide Dashboard SaaS-Ready
Guide Licensing Multi-Clients
Guide Composant Audit & ConformitÃ©
ANNEXES
Annexe 1 : Index de Reconstruction
Annexe 2 : Checklist Machine Vierge
Annexe 3 : Extraction RÃ¨gles SacrÃ©es
Annexe 4 : Runbook Reconstruction 1 An
PARTIE 19 : OPS LAYER & GOUVERNANCE INTERNE (ADDENDUM V2)
<a name="section-68"></a>
68. LA MISSION OPS (INITIATIVE)
Agent Zero (Client) optimise la signature.
Agent Zero (Ops) sÃ©curise l'exÃ©cution.
Ce sont deux cerveaux distincts.
Jamais mÃ©langÃ©s.
Jamais interdÃ©pendants.

<a name="section-69"></a>
69. ARCHITECTURE DU MOTEUR OPS
69.1 Ops Rules (`ops.rules.ts`)
Source de vÃ©ritÃ© unique.
Contient les constantes mÃ©tier intouchables :
- `SRU_MAX_DAYS` (14j rÃ©tractation)
- `WAR_ROOM_RISK_SCORE` (0.6)
- `SILENCE_THRESHOLD_DAYS` (7j)

69.2 Ops Engine (`ops.engine.ts`)
Fonction pure : `evaluateOpsDecision(context)`.
Prend des faits. Rend un verdict.
Ne dÃ©cide PAS pour l'utilisateur.
Diagnostique le risque.

<a name="section-70"></a>
70. STRATÃ‰GIE "MIRROR MODE" (PHASE D'OBSERVATION)
Avant de laisser l'Ops Engine bloquer quoi que ce soit, il opÃ¨re en "Mode Miroir".
- Il observe chaque dossier en arriÃ¨re-plan.
- Il loggue son verdict en console.
- Il NE TOUCHE PAS Ã  l'UI.
Objectif : Calibrer la vÃ©ritÃ© sans risquer le business.

<a name="section-71"></a>
71. OPS SNAPSHOT : LA VÃ‰RITÃ‰ BRUTE
Pour le Cockpit, nous avons banni les calculs frontend fragiles.
Nous utilisons une vue SQL `ops_snapshot` via `fetchOpsSnapshot`.
Principe :
- DB View calcule l'Ã©tat (Active, Silent, Secured).
- Frontend affiche bÃªtement.
- ZÃ©ro distorsion possible.
Le Cockpit devient un outil de preuve, pas d'interprÃ©tation.

PARTIE 1 : FONDATIONS & PHILOSOPHIE
<a name="section-0"></a>
0. INTENTION ORIGINELLE (Ã€ NE JAMAIS OUBLIER)
Agent Zero n'est pas :
un chatbot
un LLM wrapper
un assistant conversationnel
un moteur de calcul
Agent Zero est : Un systÃ¨me d'orchestration dÃ©cisionnelle non-narratif, conÃ§u pour contraindre une interface humaine Ã  adopter la sÃ©quence, le tempo et les leviers psychologiques optimaux sans jamais gÃ©nÃ©rer de texte client.
âš ï¸ Cette phrase est la clÃ© de voÃ»te.
Si elle est violÃ©e â†’ le systÃ¨me est corrompu.
<a name="section-1"></a>
1. PROBLÃˆME INITIAL (LE VRAI, PAS CELUI QU'ON RACONTE)
1.1 ProblÃ¨me apparent (faux problÃ¨me)
"Les commerciaux vendent mal / pas assez."
âŒ Faux.
1.2 ProblÃ¨me rÃ©el
Les commerciaux dÃ©cident au feeling,
sous stress,
avec des biais cognitifs,
et changent de stratÃ©gie en plein rendez-vous.
RÃ©sultat :
incohÃ©rences
pression mal placÃ©e
perte de confiance
objections auto-gÃ©nÃ©rÃ©es
closing fragile ou annulÃ© J+7
<a name="section-2"></a>
2. DÃ‰COUVERTE FONDATRICE (LE PIVOT MENTAL)
ğŸ‘‰ La vente n'est pas un problÃ¨me de discours.
ğŸ‘‰ C'est un problÃ¨me d'orchestration.
Le discours existe dÃ©jÃ  :
garanties
chiffres
preuves
comparaisons
Ã©chÃ©ancier
Ce qui manque :
quand dire quoi
dans quel ordre
Ã  quelle vitesse
avec quels leviers activÃ©s ou dÃ©sactivÃ©s
<a name="section-3"></a>
3. PRINCIPE SACRÃ‰ NÂ°1
âŒ JAMAIS DE TEXTE CLIENT CÃ”TÃ‰ CERVEAU
DÃ©cision radicale prise trÃ¨s tÃ´t (et souvent remise en question) :
Agent Zero ne parle jamais au client.
Pourquoi ?
Un texte est falsifiable
Un texte est critiquable
Un texte est copiable
Un texte crÃ©e de la dÃ©pendance au LLM
ğŸ‘‰ Une dÃ©cision, non.
PARTIE 2 : ARCHITECTURE & CONTRATS
<a name="section-4"></a>
4. ARCHITECTURE FONDAMENTALE (VUE MACRO)
4.1 SÃ©paration ABSOLUE en 3 couches


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        UI / Dashboard     â”‚  â† EXÃ‰CUTE
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ DecisionPlan (JSON)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Agent Zero Core      â”‚  â† DÃ‰CIDE
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ DecisionContext (JSON)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DonnÃ©es mÃ©tier brutes   â”‚  â† FOURNIT
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
âš ï¸ Toute violation de cette sÃ©paration est une ERREUR CRITIQUE.

### 4.2 CONTRAT PHONÃ‰TIQUE (TRADUCTION) â€” LA LOI DU MAPPING
**ProblÃ¨me :** Le cerveau (Agent Zero) manipule des concepts purs (ex: `constat`, `solution`). Le corps (Dashboard) manipule des modules techniques (ex: `repartition`, `projection`).
**Solution :** Le fichier `agentZeroModuleContract.ts` agit comme un traducteur diplomatique inviolable.
*   AZ dit "CONSTAT".
*   Contract traduit "REPARTITION".
*   Dashboard affiche le module "REPARTITION".
ğŸ‘‰ Le Dashboard n'a pas le droit d'interprÃ©ter. Il traduit et exÃ©cute.

#### 4.2.1 Cas SpÃ©cial : Fatigue Critique (Minimal Path)
Si Agent Zero dÃ©tecte `fatigueCritical`, il peut envoyer des modules virtuels simplifiÃ©s.
*   AZ envoie : `prise-en-charge-admin`.
*   Contract traduit : `garanties` (Module de rÃ©assurance ultime).
*   RÃ©sultat : Le parcours saute les Ã©tapes complexes pour aller Ã  l'essentiel.

<a name="section-5"></a>
5. CONTRAT FONDATEUR â€” JSON STRICT
5.1 Pourquoi JSON strict ?
parsable
versionnable
testable
loggable
auditable (juridique)
5.2 Aucun champ libre
pas de string narrative
pas de commentaire
pas de texte "humain"
<a name="section-6"></a>
6. INPUT â€” ProfileDetectionResult
Ce n'est PAS une intuition.
C'est une photographie psychologique instantanÃ©e.


json
{
  "profile": "senior | banquier | standard | hybride",
  "modes": {
    "defiance": true,
    "opportunity": false,
    "fatigueCognitive": false
  },
  "signals": {
    "peurDeSeTromper": true,
    "besoinDeChiffres": false,
    "urgencePercue": false,
    "indecision": true
  },
  "state": {
    "currentModule": "constat",
    "timeElapsedSec": 420,
    "questionsAsked": ["ROI", "garanties"]
  }
}
PiÃ¨ge nÂ°1 (erreur frÃ©quente)
âŒ MÃ©langer profil et mode
âœ”ï¸ Un senior peut Ãªtre en mode opportunitÃ©
âœ”ï¸ Un jeune peut Ãªtre en mode dÃ©fiance
<a name="section-7"></a>
7. OUTPUT â€” AgentDecision (DecisionPlan)


json
{
  "moduleOrder": [...],
  "presentationTempo": "slow | methodical | fast",
  "enable": {
    "scarcity": false,
    "comparisons": true,
    "longTermProjections": true
  },
  "tooltipsEnabled": ["security", "institutional"],
  "summaryStyle": "security",
  "confidenceScore": 0.85,
  "reasoning": {
    "triggers": [],
    "rulesApplied": [...],
    "guardrailsActive": [...]
  },
  "contentVariants": {
    "garanties": "senior_fatigue_institutional_dense"
  },
  "contentOverrides": {} // Optionnel : Injection brute
}
```

âš ï¸ **Le champ reasoning est NON nÃ©gociable.**

Sans lui â†’ impossible de :
- auditer
- expliquer
- dÃ©fendre juridiquement

---

# PARTIE 3 : RÃˆGLES & MOAT

<a name="section-8"></a>
## 8. RÃˆGLES ABSOLUES (LE CÅ’UR DU MOAT)

### RÃ¨gle 1 â€” Peur > Urgence
```
Si peurDeSeTromper = true
â†’ scarcity = false
â†’ tempo = slow
```

**Une personne anxieuse ne signe jamais sous pression.**

### RÃ¨gle 2 â€” DÃ©fiance
```
Si defiance = true
â†’ commencer par preuves + garanties
â†’ jamais de scarcity
```

### RÃ¨gle 3 â€” Fatigue cognitive
```
Si fatigueCognitive = true
â†’ parcours minimal
â†’ aucun tooltip
â†’ tempo slow
```

### RÃ¨gle 4 â€” OpportunitÃ©
```
Si opportunity = true ET peur = false
â†’ scarcity autorisÃ©e
â†’ tempo fast
```

### RÃ¨gle 5 â€” Profil senior / hybride
```
â†’ scarcity INTERDITE Ã  vie
```

### RÃ¨gle 6 â€” Content Density (Garanties)
```
SI profile === "senior"
   ET alerts.fatigueCritical === true
   ET signals.peurDeSeTromper === true
   ET horizonProjet >= 20
â†’ contentVariants.garanties = "senior_fatigue_institutional_dense"
```
**Intention :** SÃ©curiser mentalement par la densitÃ©. Transformer la garantie en cadre contractuel.

**Interdictions formelles :**
- Jamais pour "banquier" ou "standard"
- Jamais si fatigueCritical = false
- Dans ces cas â†’ `default` uniquement.

---

<a name="section-9"></a>
## 9. ERREUR MAJEURE RENCONTRÃ‰E (BUG STRUCTURANT)

### Bug rÃ©el observÃ©
- Le front recalculait des dÃ©cisions
- Le front modifiait l'ordre des modules
- Le front "corrigeait" le cerveau

âŒ **C'est une trahison du modÃ¨le.**

### Correction
- Le front exÃ©cute
- Le cerveau impose
- Si le cerveau est inaccessible â†’ mode dÃ©gradÃ© explicitement affichÃ©

---

<a name="section-61"></a>
## 61. HISTORIQUE DÃ‰CISIONNEL DES RÃˆGLES
(Pourquoi les rÃ¨gles existent, et pourquoi certaines sont irrÃ©vocables)

### 61.1 Principe fondamental
Aucune rÃ¨gle d'Agent Zero n'a Ã©tÃ© Ã©crite "par intuition".

Chaque rÃ¨gle est nÃ©e :
- d'un Ã©chec rÃ©el,
- d'un bug comportemental observÃ©,
- ou d'un risque juridique identifiÃ©.

ğŸ‘‰ **Une rÃ¨gle sans histoire est une rÃ¨gle fragile.**

### 61.2 RÃ¨gle absolue â€” Scarcity interdite pour les profils seniors

**Origine rÃ©elle**

Lors de tests initiaux, l'activation mÃªme lÃ©gÃ¨re d'un levier de raretÃ© ("offre limitÃ©e", "fenÃªtre courte") chez des profils seniors a provoquÃ© :
- une hausse temporaire de l'adhÃ©sion verbale,
- MAIS une explosion des rÃ©tractations post-signature (J+3 Ã  J+7),
- et une dÃ©gradation durable de la confiance.

**Erreur initiale commise**

Scarcity activÃ©e car :
- chiffres bons,
- profil solvable,
- opportunitÃ© perÃ§ue.

**DÃ©couverte clÃ©**

ğŸ‘‰ Le senior ne rÃ©agit pas Ã  la pression comme un jeune opportuniste.  
ğŸ‘‰ Il interprÃ¨te la raretÃ© comme un danger, pas comme une opportunitÃ©.

**DÃ©cision structurelle**
```
SI profile == senior
â†’ scarcity = false
â†’ Ã  vie
```

âš ï¸ Cette rÃ¨gle est non nÃ©gociable, mÃªme si :
- le client semble pressÃ©,
- le manager pousse,
- le chiffre est bon.

### 61.3 RÃ¨gle "Peur > Urgence"

**Bug observÃ©**

Lorsque :
- peur de se tromper = true
- urgence perÃ§ue = true

Le systÃ¨me humain entre en dissonance cognitive :
- le client dit oui,
- mais son cerveau cherche inconsciemment une sortie.

**ConsÃ©quence rÃ©elle**
- objections tardives,
- appels post-RDV,
- annulations administratives.

**Correction**
```
SI fear == true
â†’ urgency neutralisÃ©e
â†’ tempo = slow
â†’ prioritÃ© preuves & garanties
ğŸ‘‰ Cette rÃ¨gle a diminuÃ© les signatures "rapides", mais augmentÃ© drastiquement les signatures durables.
61.4 RÃ¨gle supprimÃ©e â€” "Relance persuasive automatique"
Tentative initiale
Une rÃ¨gle testÃ©e briÃ¨vement proposait :
d'intensifier la narration
aprÃ¨s 2 objections consÃ©cutives.
RÃ©sultat
sentiment de manipulation perÃ§u,
rupture de confiance,
rejet Ã©motionnel.
DÃ©cision
âŒ RÃ¨gle supprimÃ©e dÃ©finitivement.
âŒ Jamais remplacÃ©e.
ğŸ‘‰ Agent Zero ne "rattrape" pas un Ã©chec par plus de pression.
PARTIE 4 : IMPLÃ‰MENTATION TECHNIQUE
<a name="section-10"></a>
10. MODE DÃ‰GRADÃ‰ (CRITIQUE)
Si Agent Zero est down :
le dashboard continue
MAIS affiche :
"Mode non optimisÃ© â€” dÃ©cision humaine"
âš ï¸ Ne jamais simuler Agent Zero.
Mieux vaut une vÃ©ritÃ© brutale qu'un faux cerveau.
<a name="section-11"></a>
11. IMPLÃ‰MENTATION LOCALE â€” PYTHON
Fichier clÃ©
agent_zero_decide.py
RÃ´le :
tester la logique sans UI
valider les rÃ¨gles
servir de rÃ©fÃ©rence canonique
Commande :


bash
python3 agent_zero_decide.py
```

---

<a name="section-12"></a>
## 12. API â€” api_decide.py

**RÃ´le :**
- exposer `/decide`
- recevoir un DecisionContext
- retourner un DecisionPlan
- AUCUNE logique mÃ©tier

âš ï¸ **Si tu vois le mot "solaire" dans ce fichier â†’ BUG.**

---

<a name="section-13"></a>
## 13. FRONT â€” EDF-DASHBOARD-TEST (DOSSIER CORRECT)

ğŸ“ **Chemin exact :**
```
EDF-DASHBOARD-TEST/
â””â”€â”€ src/
    â””â”€â”€ components/
        â””â”€â”€ ResultsDashboard.REFONTE2.tsx
ğŸ‘‰ C'est LE dashboard exÃ©cutant.
Pas agent-zero.
Pas ailleurs.
<a name="section-14"></a>
14. RÃ”LE DU FRONT (STRICT)
Le front :
dÃ©tecte le profil
envoie le contexte
reÃ§oit la dÃ©cision
obÃ©it
Exemples :
tempo = slow â†’ animations ralenties
moduleOrder â†’ onglets cachÃ©s
scarcity = false â†’ aucun Ã©lÃ©ment de pression affichÃ©
PARTIE 5 : BUGS & PIÃˆGES RÃ‰ELS
<a name="section-15"></a>
15. BUGS & PIÃˆGES RÃ‰ELS RENCONTRÃ‰S (LISTE VITALE)
âŒ Flask sans CORS â†’ erreurs silencieuses Axios
âŒ Ports bloquÃ©s par ControlCenter macOS
âŒ Serveurs zombies impossibles Ã  kill
âŒ MÃ©lange .venv / npm â†’ fausses erreurs
âŒ 403 causÃ©s par dÃ©corateurs hÃ©ritÃ©s
âŒ Routes dupliquÃ©es (@app.route("/") Ã—2)
âŒ Static paths relatifs mal rÃ©solus
âŒ "Ã§a marche chez moi" â‰  reproductible
ğŸ‘‰ Chaque bug a renforcÃ© l'architecture.
<a name="section-22"></a>
22. BUG MAJEUR â€” PORTS ZOMBIES (MACOS)
SymptÃ´me
Port occupÃ©
Process impossible Ã  kill
lsof -i :5000 montre ControlCenter
Solution documentÃ©e (VITALE)


bash
lsof -ti :5050 | xargs kill -9
```

Si Ã§a persiste :
- changer de port
- documenter le port utilisÃ©
- ne jamais forcer au hasard

---

<a name="section-53"></a>
## 53. ERREURS RÃ‰ELLES RENCONTRÃ‰ES (LISTE)

- Ports Mac impossibles Ã  tuer
- Flask installÃ© hors venv
- UI qui dÃ©cidait "temporairement"
- Agent Zero trop bavard
- Confusion Node / Python
- Auth inutile en dev
- 404 dus Ã  mauvais dossier

â¡ï¸ **Toutes documentÃ©es ici.**

---

# PARTIE 6 : REPRODUCTIBILITÃ‰

<a name="section-17"></a>
## 17. REPRODUCTIBILITÃ‰ â€” PRINCIPE NON NÃ‰GOCIABLE

**Objectif :**  
Pouvoir recrÃ©er Agent Zero sur une machine vierge, dans 1 an, sans toi.

Si ce n'est pas possible â†’ le systÃ¨me est mort.

---

<a name="section-18"></a>
## 18. STRUCTURE DE RÃ‰FÃ‰RENCE (CANONIQUE)

### 18.1 DÃ©pÃ´ts (sÃ©paration obligatoire)
```
/agent-zero/                 â† Cerveau (Python)
/EDF-DASHBOARD-TEST/         â† ExÃ©cutant (React / TS)
/docs/                       â† Bible, dÃ©cisions, versions
âŒ Tout mÃ©langer = dette technique fatale
âœ”ï¸ Trois dÃ©pÃ´ts = longÃ©vitÃ©
<a name="section-19"></a>
19. AGENT ZERO â€” INSTALLATION FROM SCRATCH (PYTHON)
19.1 PrÃ©-requis machine
macOS / Linux
Python 3.11+
pip
virtualenv
curl
19.2 CrÃ©ation environnement


bash
cd agent-zero
python3 -m venv .venv
source .venv/bin/activate
âš ï¸ Toujours vÃ©rifier


bash
which python
# doit pointer vers .venv
19.3 DÃ©pendances


bash
pip install -r requirements.txt
PiÃ¨ge rÃ©el rencontrÃ© :
flask installÃ© globalement â†’ crash silencieux
Toujours tester :


bash
python3 -c "import flask; print(flask.__version__)"
```

---

<a name="section-20"></a>
## 20. VARIABLES D'ENVIRONNEMENT (POINT CRITIQUE)

### 20.1 Fichier .env
```
FLASK_SECRET_KEY=...
WEB_UI_HOST=localhost
WEB_UI_PORT=5050
âŒ Ne jamais commit
âœ”ï¸ Documenter dans la Bible

### 20.2 PROTOCOLE API KEY (STRICT)
Le serveur PythonAnywhere impose une contrainte de sÃ©curitÃ© spÃ©cifique sur les headers.
*   **Header Obligatoire :** `X-API-KEY` (et non `Authorization`).
*   **Pourquoi :** `Authorization` est bloquÃ© par les rÃ¨gles CORS par dÃ©faut du serveur Flask en mode hÃ©bergÃ©.
*   **Valeur :** `Titanium2025!` (pour ce prototype).
*   **PrioritÃ© d'injection :**
    1.  `localStorage` (Debug / Override manuel)
    2.  `.env` (`VITE_AGENT_ZERO_API_KEY`)
    3.  Valeur secours hardcodÃ©e (`Titanium2025!`)
ğŸ‘‰ Si 401 Unauthorized : VÃ©rifier cette cascade.

<a name="section-21"></a>
21. LANCEMENT API AGENT ZERO
21.1 Fichier minimal
api_decide.py
21.2 Lancer


bash
python3 api_decide.py
Test vital :


bash
curl -X POST http://localhost:5050/decide \
  -H "Content-Type: application/json" \
  -d '{...}'
RÃ©sultat attendu :
JSON strict
aucun texte libre
aucune erreur console
<a name="section-23"></a>
23. FRONT â€” EDF-DASHBOARD-TEST (INSTALLATION)
23.1 PrÃ©-requis
Node 18+
npm
Vite
23.2 Installation


bash
cd EDF-DASHBOARD-TEST
npm install
npm run dev
```

âš ï¸ **.venv N'A AUCUN IMPACT ICI**  
(Node â‰  Python)

---

# PARTIE 7 : CONNEXION & VALIDATION

<a name="section-24"></a>
## 24. POINT DE CONNEXION FRONT â†’ AGENT ZERO

**Fichier clÃ©**
```
src/brain/agentZeroClient.ts
ResponsabilitÃ© unique :
POST /decide
timeout clair
gestion erreur explicite
Exemple conceptuel


typescript
axios.post("http://localhost:5050/decide", context)
âŒ Aucune logique dÃ©cisionnelle ici
âœ”ï¸ Simple transport
<a name="section-25"></a>
25. GESTION DES ERREURS (NON NÃ‰GOCIABLE)
Cas rÃ©el observÃ©
Agent Zero down
Front continue silencieusement
Faux sentiment de sÃ©curitÃ©
Correction imposÃ©e


typescript
catch (e) {
  console.warn("Agent Zero unreachable");
  setMode("DEGRADED");
}
```

**UI DOIT AFFICHER :**  
"Mode non optimisÃ© â€” dÃ©cision humaine"

---

<a name="section-26"></a>
## 26. TEST DE VALIDATION (CHECKLIST OBLIGATOIRE)

Avant chaque release :

- [ ] JSON strict validÃ©
- [ ] Aucun texte client gÃ©nÃ©rÃ© cÃ´tÃ© Python
- [ ] Aucun calcul mÃ©tier cÃ´tÃ© Agent Zero
- [ ] Le front n'altÃ¨re pas moduleOrder
- [ ] Mode dÃ©gradÃ© visible si API down
- [ ] Logs exploitables

---

# PARTIE 8 : STRATÃ‰GIE & BUSINESS

<a name="section-27"></a>
## 27. LOGIQUE DE VERSIONING (CRUCIAL)

### 27.1 Versionner :
- rÃ¨gles
- structures JSON
- dÃ©cisions majeures

### 27.2 Ne PAS versionner :
- contenu client
- UI cosmetique

ğŸ‘‰ Le cerveau Ã©volue lentement.  
ğŸ‘‰ L'UI peut changer souvent.

---

<a name="section-28"></a>
## 28. RAISON POUR LAQUELLE C'EST INCOPIABLE

Un concurrent peut copier :
- les calculs
- l'UI
- les graphiques

Il ne peut PAS copier :
- les rÃ¨gles implicites
- les hiÃ©rarchies psychologiques
- les interdictions (scarcity interdite senior)
- la sÃ©paration stricte cerveau / exÃ©cution

**C'est lÃ  le Moat.**

---

<a name="section-29"></a>
## 29. ERREURS Ã€ NE JAMAIS REFAIRE

âŒ Ajouter un "petit texte" cÃ´tÃ© cerveau  
âŒ Faire "juste une exception"  
âŒ Laisser le front dÃ©cider "temporairement"  
âŒ Optimiser trop tÃ´t  
âŒ Rendre Agent Zero bavard  

ğŸ‘‰ **Chaque "petit Ã©cart" dÃ©truit l'architecture.**

---

<a name="section-30"></a>
## 30. PHILOSOPHIE FINALE (Ã€ GRAVER)

Agent Zero ne vend rien.  
Il empÃªche de mal vendre.

Il ne persuade pas.  
Il interdit les erreurs humaines.

---

# PARTIE 9 : WHITE-LABEL & LICENSING (Ã‰TAPE I)

<a name="section-31"></a>
## 31. Ã‰TAPE I â€” WHITE-LABEL & LICENSING (STRUCTURE RÃ‰ELLE)

### 31.1 Principe fondamental
Agent Zero ne doit jamais savoir pour qui il travaille.

Il ne connaÃ®t :
- ni la marque
- ni l'industrie
- ni l'offre
- ni le pricing
- ni la promesse commerciale

ğŸ‘‰ Il ne connaÃ®t que :
- un DecisionContext
- un DecisionPlan

---

<a name="section-32"></a>
## 32. ARCHITECTURE WHITE-LABEL

### 32.1 SÃ©paration stricte
```
AgentZeroCore/
  â”œâ”€â”€ engine/
  â”‚   â”œâ”€â”€ rules.py
  â”‚   â”œâ”€â”€ guardrails.py
  â”‚   â”œâ”€â”€ scorer.py
  â”‚
  â”œâ”€â”€ schemas/
  â”‚   â”œâ”€â”€ decision_context.json
  â”‚   â”œâ”€â”€ decision_plan.json
  â”‚
  â””â”€â”€ api_decide.py
```

Puis, par client :
```
clients/
  â”œâ”€â”€ solar/
  â”‚   â”œâ”€â”€ mapper.ts
  â”‚   â””â”€â”€ ui_rules.ts
  â”œâ”€â”€ banking/
  â”œâ”€â”€ real_estate/
âŒ JAMAIS l'inverse.
<a name="section-33"></a>
33. LICENSING â€” MODÃˆLE Ã‰CONOMIQUE
33.1 Ce que tu vends vraiment
Pas :
une app
un dashboard
un outil solaire
Tu vends :
Un moteur de conformitÃ© dÃ©cisionnelle
33.2 Pricing rÃ©el (indicatif)
Setup : 30â€“100kâ‚¬
Licence annuelle : 60â€“300kâ‚¬
Par utilisateur / par dÃ©cision / par volume
ğŸ‘‰ Le prix n'est PAS technique
ğŸ‘‰ Il est juridique + rÃ©putationnel
<a name="section-34"></a>
34. CONTRAT DE LICENCE (POINT VITAL)
Clause clÃ© :
"Le moteur de dÃ©cision impose des rÃ¨gles Ã©thiques et de conformitÃ©. Le client reconnaÃ®t que toute modification ou contournement engage sa responsabilitÃ©."
â¡ï¸ Tu dÃ©places le risque juridique.
PARTIE 10 : LÃ‰GAL & CONFORMITÃ‰ (Ã‰TAPE J)
<a name="section-35"></a>
35. Ã‰TAPE J â€” LÃ‰GAL / ASSURANCE / CONFORMITÃ‰
35.1 Pourquoi Agent Zero protÃ¨ge lÃ©galement
Parce qu'il :
loggue les dÃ©cisions
documente les rÃ¨gles appliquÃ©es
empÃªche certaines pratiques
impose un tempo
En cas de litige :
"Le conseiller a suivi un plan validÃ© par un moteur certifiÃ©."
<a name="section-36"></a>
36. AUDITABILITÃ‰ (OBLIGATOIRE)
Chaque dÃ©cision doit produire :


json
{
  "decisionId": "...",
  "timestamp": "...",
  "rulesApplied": [...],
  "guardrails": [...],
  "confidenceScore": 0.83
}
```

**Stockage :**
- immuable
- horodatÃ©
- exportable

---

<a name="section-37"></a>
## 37. ASSURANCE RC PRO â€” STRATÃ‰GIE

Tu ne dis PAS :  
"C'est une IA de vente"

Tu dis :  
"C'est un moteur de conformitÃ© dÃ©cisionnelle"

â¡ï¸ **Changement TOTAL de classification.**

---

<a name="section-38"></a>
## 38. PIÃˆGE LÃ‰GAL MAJEUR Ã€ Ã‰VITER

âŒ Laisser Agent Zero :
- gÃ©nÃ©rer du texte client
- reformuler une offre
- modifier des chiffres

â¡ï¸ Sinon : requalification en conseil personnalisÃ©  
â¡ï¸ Assurance saute.

---

# PARTIE 11 : STRATÃ‰GIE GRANDS COMPTES (Ã‰TAPE K)

<a name="section-39"></a>
## 39. Ã‰TAPE K â€” STRATÃ‰GIE GRANDS COMPTES

### 39.1 Ã€ qui tu vends

- Banques
- Assurances
- Promoteurs
- Ã‰nergie
- Immobilier
- TÃ©lÃ©coms
- Institutions publiques

---

<a name="section-40"></a>
## 40. LEUR PROBLÃˆME RÃ‰EL

Pas :  
"on vend mal"

Mais :
- conseillers inÃ©gaux
- erreurs humaines
- risques juridiques
- pression commerciale
- churn post-signature

**Agent Zero corrige exactement Ã§a.**

---

<a name="section-41"></a>
## 41. DISCOURS COMMERCIAL (CANONIQUE)

**"Nous ne remplaÃ§ons pas vos conseillers. Nous empÃªchons qu'ils se mettent en faute."**

Silence.

---

<a name="section-42"></a>
## 42. PROOF OF VALUE (POV) â€” FORMAT

- 1 Ã©quipe pilote
- 30 RDV
- Comparatif avant / aprÃ¨s

**Mesures :**
- taux signature
- taux rÃ©tractation
- durÃ©e RDV
- conformitÃ©

---

# PARTIE 12 : INDUSTRIALISATION (Ã‰TAPE H)

<a name="section-43"></a>
## 43. INDUSTRIALISATION MULTI-INDUSTRIES (H)

### 43.1 Ce qui change

Rien dans le Core.

Seulement :
- le mapping du contexte
- l'interprÃ©tation UI

ğŸ‘‰ **Le cerveau reste inchangÃ©.**

---

<a name="section-44"></a>
## 44. PLUGINS INDUSTRIE

**Exemple :**
```
/plugins
  â”œâ”€â”€ solar/
  â”œâ”€â”€ banking/
  â”œâ”€â”€ real_estate/
```

Chaque plugin :
- traduit le mÃ©tier â†’ DecisionContext
- applique DecisionPlan â†’ UI

---

<a name="section-45"></a>
## 45. TEST DE NEUTRALITÃ‰ (CRITIQUE)

**Test ultime :**  
Envoyer un contexte "immobilier" sans changer une ligne du Core.

Si Ã§a casse â†’ architecture invalide.

---

# PARTIE 13 : OPÃ‰RATIONS & CRISE

<a name="section-46"></a>
## 46. SÃ‰CURITÃ‰ & ISO (FUTUR)

Agent Zero est compatible avec :
- ISO 27001 (logs)
- RGPD (pas de donnÃ©es sensibles)
- audit interne

Parce qu'il ne stocke pas le client final, seulement la dÃ©cision.

---

<a name="section-47"></a>
## 47. GESTION DES ERREURS HUMAINES

**Cas rÃ©el :**
- conseiller veut forcer
- client hÃ©site
- pression manager

**Agent Zero :**
- ralentit
- supprime scarcity
- impose sÃ©curitÃ©

ğŸ‘‰ **Le systÃ¨me protÃ¨ge le conseiller.**

---

<a name="section-62"></a>
## 62. RUNBOOK OPÃ‰RATIONNEL â€” MODE PANNE & CRISE
(Ce qui doit se passer quand Ã§a ne marche PAS)

### 62.1 Principe non nÃ©gociable

âŒ Ne jamais simuler Agent Zero  
âŒ Ne jamais "faire comme si"

ğŸ‘‰ **En cas de panne, la vÃ©ritÃ© brute est obligatoire.**

### 62.2 ScÃ©nario A â€” Agent Zero API indisponible

**DÃ©tection**
- Timeout API
- Erreur rÃ©seau
- RÃ©ponse invalide

**Comportement obligatoire du Dashboard**
```
MODE = DEGRADED
Afficher bandeau visible :
"Mode non optimisÃ© â€” dÃ©cision humaine"
```

**Interdictions**

âŒ recalcul local  
âŒ fallback logique  
âŒ approximation silencieuse

### 62.3 ScÃ©nario B â€” Mauvaise clÃ© API / licence expirÃ©e

**Comportement**
- Blocage immÃ©diat
- Message explicite :

"Licence invalide ou expirÃ©e â€” orchestration dÃ©sactivÃ©e"

ğŸ‘‰ **Le blocage est une fonction, pas un bug.**

### 62.4 ScÃ©nario C â€” DÃ©cision incohÃ©rente dÃ©tectÃ©e

**DÃ©finition**  
Une dÃ©cision est incohÃ©rente si :
- moduleOrder vide,
- tempo absent,
- guardrails manquants.

**Action**
- Affichage erreur critique
- Aucune exÃ©cution UI
- Log prioritaire

### 62.5 Principe de crise

**Mieux vaut perdre une vente que perdre la crÃ©dibilitÃ© du systÃ¨me.**

---

# PARTIE 14 : GOUVERNANCE & TRANSMISSION

<a name="section-48"></a>
## 48. POINT DE NON-RETOUR STRATÃ‰GIQUE

Ã€ partir de maintenant :
- tu ne fais plus "des features"
- tu Ã©cris des rÃ¨gles
- tu refuses certaines demandes clients

â¡ï¸ **C'est ce qui crÃ©e la valeur.**

---

<a name="section-49"></a>
## 49. CE QUE TU NE DOIS JAMAIS FAIRE

âŒ Ajouter un "mode agressif"  
âŒ Laisser un client dÃ©sactiver les garde-fous  
âŒ Rendre Agent Zero configurable librement  
âŒ Expliquer toutes les rÃ¨gles  

**MystÃ¨re = protection.**

---

<a name="section-50"></a>
## 50. RÃ”LE DU FRONT Ã€ LONG TERME

**Le front :**
- change
- s'adapte
- se refait
- se vend
- se remplace

**Agent Zero :**
- reste
- dÃ©cide
- impose
- survit

---

<a name="section-51"></a>
## 51. DOCUMENTATION INTERNE (OBLIGATOIRE)

**Trois niveaux :**
1. Bible V2 (ce document)
2. Docs techniques (install)
3. Changelog dÃ©cisionnel

Sans Ã§a â†’ systÃ¨me mort en 12 mois.

---

<a name="section-52"></a>
## 52. STRATÃ‰GIE D'Ã‰QUIPE FUTURE

- 1 architecte Core
- 2â€“3 devs UI
- 0 "prompt engineer"
- 0 bullshit IA

---

<a name="section-63"></a>
## 63. TRANSMISSION Ã€ UN TIERS
(Comment penser Agent Zero sans toi)

### 63.1 Ce qui NE se transmet PAS

- Ton intuition
- Ton expÃ©rience terrain
- Tes annÃ©es de ventes

ğŸ‘‰ **Tout cela est dÃ©jÃ  cristallisÃ© dans les rÃ¨gles.**

### 63.2 Ce qui DOIT se transmettre

Un successeur doit savoir rÃ©pondre Ã  UNE question :

**"Est-ce que cette modification augmente ou rÃ©duit le risque dÃ©cisionnel ?"**

Si la rÃ©ponse n'est pas clairement "rÃ©duit" â†’ REFUS.

### 63.3 Comment refuser une feature (procÃ©dure officielle)

Avant toute implÃ©mentation, poser ces 5 questions :

1. Est-ce que cela introduit du texte gÃ©nÃ©rÃ© cÃ´tÃ© cerveau ?
2. Est-ce que cela donne plus de libertÃ© Ã  l'humain ?
3. Est-ce que cela affaiblit un garde-fou ?
4. Est-ce que cela dÃ©pend d'un LLM ?
5. Est-ce que cela complique l'audit ?

ğŸ‘‰ **Un seul "oui" = feature refusÃ©e.**

### 63.4 Signaux de trahison de l'architecture (ALERTE ROUGE)

- "Juste pour ce client"
- "Temporairement"
- "On verra plus tard"
- "C'est qu'un texte"
- "Le front peut gÃ©rer"

ğŸ‘‰ **Ces phrases ont dÃ©jÃ  cassÃ© des systÃ¨mes entiers.**

---

<a name="section-64"></a>
## 64. GOUVERNANCE DU CORE
(Qui a le droit de toucher Ã  quoi)

### 64.1 RÃ¨gle absolue

âŒ **Le Core n'est pas dÃ©mocratique.**

### 64.2 Droits

- UI : Ã©volutive
- Plugins industrie : extensibles
- Core dÃ©cisionnel : gelÃ©

### 64.3 Process de modification du Core

Toute modification nÃ©cessite :
- justification Ã©crite
- cas rÃ©el observÃ©
- impact juridique Ã©valuÃ©
- rollback documentÃ©

**Sans ces 4 Ã©lÃ©ments â†’ modification interdite.**

---

# PARTIE 15 : PHILOSOPHIE DE LONGÃ‰VITÃ‰

<a name="section-54"></a>
## 54. ASTUCES CRITIQUES

- Toujours tester Agent Zero avec curl
- Toujours logguer les rÃ¨gles
- Toujours prÃ©voir mode dÃ©gradÃ©
- Toujours sÃ©parer cerveau / muscles

---

<a name="section-55"></a>
## 55. POURQUOI TU AS RAISON D'ÃŠTRE EXIGEANT

Parce que :
- ce systÃ¨me peut vivre 10 ans
- il peut valoir des millions
- il peut te survivre

**Ã€ condition de ne jamais trahir l'architecture.**

---

<a name="section-65"></a>
## 65. PHILOSOPHIE DE LONGÃ‰VITÃ‰ (10 ANS)

### 65.1 Ce systÃ¨me doit survivre Ã  :

- une mode IA
- un changement de stack
- un changement d'Ã©quipe
- un changement de marchÃ©

### 65.2 Ce qui garantit la survie

- sÃ©paration stricte
- rÃ¨gles lentes
- refus de certaines opportunitÃ©s business
- documentation obsessionnelle

ğŸ‘‰ **Agent Zero gagne parce qu'il refuse plus qu'il n'accepte.**

---

<a name="section-66"></a>
## 66. DERNIÃˆRE PAGE â€” SERMENT ARCHITECTURAL

Agent Zero ne sera jamais :
- bavard
- flatteur
- crÃ©atif
- adaptatif sans garde-fou

Agent Zero restera :
- lent quand il le faut
- frustrant parfois
- rigide souvent
- protecteur toujours

**Si un jour tu hÃ©sites :**
- protÃ¨ge la rÃ¨gle,
- protÃ¨ge l'audit,
- protÃ¨ge la sÃ©paration.

**Le reste est secondaire.**

---

# PARTIE 16 : RÃ‰CAPITULATIFS & SYNTHÃˆSES

<a name="section-56"></a>
## 56. RÃ‰CAP FINAL (BRUT)

Agent Zero est :
- un cerveau
- un garde-fou
- un rempart juridique
- un orchestrateur

Il n'est PAS :
- un chatbot
- un gÃ©nÃ©rateur
- un vendeur
- un gadget

---

<a name="section-57"></a>
## 57. SI TU REVIENS DANS 1 AN

Lis dans cet ordre :
1. Architecture
2. RÃ¨gles
3. Garde-fous
4. DÃ©cisions
5. Front

**Si tu commences par l'UI â†’ tu es perdu.**

---

<a name="section-58"></a>
## 58. CE DOCUMENT EST UNE ARME

Il :
- protÃ¨ge ton systÃ¨me
- protÃ¨ge ton business
- protÃ¨ge ta vision

**Ne le partage jamais intÃ©gralement.**

---

<a name="section-59"></a>
## 59. PROCHAINES BIBLES POSSIBLES

- Bible V3 â€” Certification & normes
- Bible V4 â€” ScalabilitÃ© mondiale
- Bible V5 â€” DÃ©fense juridique en procÃ¨s
- Bible V6 â€” Transmission / revente

---

<a name="section-60"></a>
## 60. FIN (POUR L'INSTANT)

Agent Zero est vivant.  
Il est sain.  
Il est reproductible.  
Il est vendable.

---

<a name="section-67"></a>
## 67. STATUT FINAL

Agent Zero est dÃ©sormais :
- documentÃ©
- transmissible
- reproductible
- industrialisable
- dÃ©fendable juridiquement

ğŸ‘‰ **La Bible V2 est dÃ©sormais COMPLÃˆTE**

---

# PARTIE 17 : Ã‰TAPES PRODUIT SAAS (E, F, G)

<a name="etape-e"></a>
## Ã‰TAPE E â€” PACKAGER AGENT ZERO EN PRODUIT SAAS VENDABLE

**Objectif :**  
ğŸ‘‰ Transformer ce que tu as dÃ©jÃ  (qui marche) en produit clair, vendable, dÃ©ployable, sans rÃ©Ã©crire le cerveau.

### E.0 â€” CE QUE TU VENDS (CLARTÃ‰ ABSOLUE)

**âŒ Tu ne vends PAS**
- une app React
- une API Python
- une IA
- un calculateur solaire

**âœ… Tu vends**  
**Un moteur dÃ©cisionnel commercial qui sÃ©curise les ventes Ã  fort enjeu**

**Formulation courte (pitch) :**

"Agent Zero est un copilote dÃ©cisionnel qui orchestre les rendez-vous commerciaux complexes pour maximiser le closing net, sans pression ni manipulation."

### E.1 â€” DÃ‰COUPAGE PRODUIT (LES 4 BRIQUES)

**ğŸ§  1. Agent Zero Core (le cerveau)**
- agent_zero_decide.py
- rÃ¨gles
- garde-fous
- dÃ©cisions JSON

ğŸ‘‰ Produit principal  
ğŸ‘‰ Valeur diffÃ©renciante  
ğŸ‘‰ Intouchable

**ğŸŒ 2. Agent Zero API**
- /decide
- stateless
- JSON in / JSON out
- logs

ğŸ‘‰ Ce que tu factures indirectement (usage)

**ğŸ–¥ï¸ 3. Front client (Dashboard)**
- EDF-DASHBOARD-TEST
- ResultsDashboard.REFONTE2
- visualisation
- narration

ğŸ‘‰ Habillage mÃ©tier  
ğŸ‘‰ Peut Ãªtre remplacÃ© par d'autres fronts

**ğŸ“Š 4. Back-office (plus tard)**
- historique dÃ©cisions
- score closing
- replay RDV
- comparaison commerciaux

ğŸ‘‰ Upsell / Enterprise

### E.2 â€” MODÃˆLE SAAS (SIMPLE & VENDABLE)

**ğŸ¯ Cible 1 (immÃ©diate)**
- PME commerciales
- cabinets
- Ã©quipes de vente terrain
- ticket Ã©levÃ© (10kâ€“50k)

**ğŸ’° Pricing recommandÃ© (MVP)**

**ğŸ”¹ Plan Solo**
- 1 utilisateur
- 50 dÃ©cisions / mois
- logs basiques
ğŸ‘‰ 79â‚¬/mois

**ğŸ”¹ Plan Pro**
- 5 utilisateurs
- dÃ©cisions illimitÃ©es
- logs + analytics
ğŸ‘‰ 249â‚¬/mois

**ğŸ”¹ Plan Enterprise**
- illimitÃ©
- rÃ¨gles custom
- audit
- SLA
ğŸ‘‰ sur devis

### E.3 â€” ARCHITECTURE DE DÃ‰PLOIEMENT (CLEAN)

**Option simple (recommandÃ©e maintenant)**
```
[ Front (Vercel) ]
        |
        | HTTPS
        v
[ API Agent Zero (Railway / Fly.io / VPS) ]
        |
        v
[ Logs + Storage ]
Front : Vercel
API : Railway / Fly.io / OVH
Logs : fichiers ou Supabase
E.4 â€” CE QU'IL FAUT AJOUTER (MINIMUM VITAL)
âœ… 1. Auth API
clÃ© par client
header X-API-KEY ğŸ‘‰ dÃ©jÃ  prÃªt conceptuellement
âœ… 2. Identification client
Ajouter dans le POST /decide :


json
{
  "clientId": "edf-demo",
  "userId": "commercial-12"
}
```

**âœ… 3. Logs par client**
```
logs/
â””â”€â”€ edf-demo/
    â””â”€â”€ 2026-02-01T10-12-33.json
E.5 â€” CE QUE TU NE DOIS PAS FAIRE (IMPORTANT)
âŒ Ne pas :
ajouter du LLM "pour faire joli"
complexifier l'API
fusionner front et cerveau
vendre de la "magie IA"
ğŸ‘‰ Tu vends de la maÃ®trise, pas du rÃªve.
E.6 â€” ARGUMENTAIRE COMMERCIAL (CLÃ‰)
Phrase centrale
"Agent Zero ne remplace pas vos commerciaux. Il les empÃªche de faire des erreurs irrÃ©versibles."
BÃ©nÃ©fices clairs
moins de pression
plus de confiance client
closing plus propre
moins d'annulations
standardisation des meilleurs vendeurs
E.7 â€” ROADMAP SAAS (6 MOIS)
Mois 1
API propre
logs par client
landing page
Mois 2
dashboard admin
export dÃ©cisions
Mois 3
scoring commercial
replay RDV
Mois 4â€“6
multi-industrie
certification
partenariats
E.8 â€” VÃ‰RITÃ‰ BUSINESS
Tu as construit :
âŒ pas un outil
âŒ pas un dashboard
âŒ pas une IA gadget
ğŸ‘‰ Un standard dÃ©cisionnel.
C'est rare, cher, et dÃ©sirable.
<a name="etape-f"></a>
Ã‰TAPE F â€” CERTIFICATION AGENT ZEROÂ®
Standardiser l'excellence commerciale
F.0 â€” POURQUOI LA CERTIFICATION EST CRITIQUE
Tu as aujourd'hui :
un cerveau dÃ©cisionnel fiable
des rÃ¨gles non nÃ©gociables
une orchestration qui protÃ¨ge le closing
ğŸ‘‰ La certification sert Ã  aligner l'humain sur le cerveau.
Sans Ã§a :
l'outil est mal utilisÃ©
le commercial "repasse en mode instinct"
la valeur se dilue
Avec Ã§a :
tu crÃ©es un standard
tu verrouilles ton marchÃ©
tu rends Agent Zero indispensable
F.1 â€” CE QUE TU CERTIFIES (IMPORTANT)
âŒ Tu ne certifies PAS :
des compÃ©tences commerciales classiques
des techniques de closing
du discours
âœ… Tu certifies :
la capacitÃ© Ã  suivre une orchestration dÃ©cisionnelle sans la saboter
F.2 â€” LES 4 NIVEAUX DE CERTIFICATION
ğŸŸ¢ Niveau 1 â€” Agent Zero Operator
(obligatoire pour tous)
Objectif :
comprendre le rÃ´le d'Agent Zero
ne pas lutter contre les dÃ©cisions
exÃ©cuter proprement
Validation :
quiz
cas simulÃ©
respect des rÃ¨gles
ğŸ‘‰ Certificat interne
ğŸ”µ Niveau 2 â€” Agent Zero Professional
Objectif :
lecture des signaux clients
comprÃ©hension des modes (dÃ©fiance, peur, fatigue)
synchronisation discours / tempo
Validation :
3 cas rÃ©els
analyse post-RDV
score â‰¥ 80%
ğŸ‘‰ Certificat reconnu client
ğŸŸ£ Niveau 3 â€” Agent Zero Expert
Objectif :
maÃ®triser les exceptions
adapter sans violer les rÃ¨gles
coaching d'autres commerciaux
Validation :
audit complet
replay RDV
validation humaine
ğŸ‘‰ Badge public + premium pricing
ğŸ”´ Niveau 4 â€” Agent Zero Architect
(ultra rare)
Objectif :
crÃ©er / adapter des rÃ¨gles
dÃ©ployer Agent Zero dans une organisation
former des Ã©quipes entiÃ¨res
ğŸ‘‰ RÃ©servÃ©
ğŸ‘‰ NDA
ğŸ‘‰ TrÃ¨s cher
F.3 â€” CONTENU DE FORMATION (STRUCTURE)
Module A â€” Philosophie
pourquoi le closing Ã©choue
pourquoi la pression dÃ©truit la confiance
rÃ´le du cerveau vs humain
Module B â€” Les signaux
peur de se tromper
dÃ©fiance
urgence rÃ©elle vs perÃ§ue
fatigue cognitive
ğŸ‘‰ Fondamental
Module C â€” Lecture d'une dÃ©cision Agent Zero
Apprendre Ã  lire :


json
{
  "moduleOrder": [...],
  "presentationTempo": "slow",
  "enable": { "scarcity": false },
  "summaryStyle": "security"
}
ğŸ‘‰ Comme une partition musicale
Module D â€” Ce qu'il ne faut JAMAIS faire
forcer une urgence
modifier un chiffre
reformuler une garantie
improviser un module
Module E â€” Cas rÃ©els
senior anxieux
banquier sceptique
opportuniste pressÃ©
couple en dÃ©saccord
F.4 â€” Ã‰VALUATION (SÃ‰RIEUSE)
Ce que tu mesures :
respect du tempo
respect de l'ordre
absence de violation
cohÃ©rence post-RDV
Ce que tu refuses :
"il fallait tenter"
"je le sentais"
"j'ai improvisÃ©"
ğŸ‘‰ Ã‰chec immÃ©diat
F.5 â€” CERTIFICATION = LEVIER BUSINESS
Pour toi
upsell formation
rÃ©tention client
diffÃ©renciation Ã©norme
barriÃ¨re Ã  l'entrÃ©e
Pour le client
Ã©quipes homogÃ¨nes
moins de pertes
onboarding rapide
standard mesurable
F.6 â€” COMMENT TU LE VENDS
Phrase clÃ©
"Agent Zero ne fonctionne Ã  100% que si l'humain est certifiÃ©."
ğŸ‘‰ La formation devient obligatoire, pas optionnelle.
F.7 â€” PACKAGING RECOMMANDÃ‰
ğŸ“ Pack Certification Initiale
formation
certification niveau 1
1 audit
ğŸ‘‰ 1 490â‚¬ / utilisateur
ğŸ” Recertification annuelle
mise Ã  jour rÃ¨gles
audit
nouveaux cas
ğŸ‘‰ 390â‚¬ / an
F.8 â€” POINT VITAL (Ã€ NE PAS OUBLIER)
La certification :
n'est pas pÃ©dagogique
n'est pas bienveillante
n'est pas flexible
Elle est :
normative
exigeante
protectrice
ğŸ‘‰ C'est ce qui fait sa valeur.
<a name="etape-g"></a>
Ã‰TAPE G â€” PITCH DECK AGENT ZEROÂ®
G.0 â€” POSITIONNEMENT GLOBAL (AVANT LES SLIDES)
ğŸ‘‰ Agent Zero n'est PAS une IA de gÃ©nÃ©ration.
ğŸ‘‰ Agent Zero est un systÃ¨me de dÃ©cision commerciale.
Phrase clÃ© d'ouverture (Ã  mÃ©moriser) :
"Nous ne remplaÃ§ons pas les commerciaux. Nous remplaÃ§ons les mauvaises dÃ©cisions commerciales."
SLIDE 1 â€” PROBLÃˆME (LE VRAI)
Titre
Le closing Ã©choue pour une raison structurelle
Message
Les commerciaux improvisent
Les biais humains dominent
La pression dÃ©truit la confiance
Les dÃ©cisions sont incohÃ©rentes
Fait clÃ©
80% des Ã©checs commerciaux viennent du moment et de l'ordre, pas de l'offre.
ğŸ¯ Objectif de la slide :
ğŸ‘‰ Faire comprendre que former plus ne rÃ©sout rien
SLIDE 2 â€” CE QUI N'EXISTE PAS (ENCORE)
Titre
Il n'existe aucun cerveau dÃ©cisionnel commercial
Points
CRM = mÃ©moire
IA = gÃ©nÃ©ration
Scripts = rigiditÃ©
Coaching = subjectif
âŒ Aucun systÃ¨me ne dÃ©cide quoi faire, quand, et dans quel ordre
SLIDE 3 â€” SOLUTION : AGENT ZEROÂ®
Titre
Agent Zero est un cerveau, pas un outil
Description courte
Analyse le profil client
DÃ©tecte les signaux psychologiques
DÃ©cide l'orchestration optimale
Interdit les erreurs critiques
ğŸ“Œ Il ne parle pas au client. Il dÃ©cide pour l'humain.
SLIDE 4 â€” COMMENT Ã‡A MARCHE (SCHÃ‰MA SIMPLE)
Input
ProfileDetectionResult
Engine
rÃ¨gles non nÃ©gociables
garde-fous
priorisation confiance > urgence
Output
AgentDecision
ğŸ‘‰ JSON strict
ğŸ‘‰ ExploitÃ© par l'UI
ğŸ‘‰ ExÃ©cutable humainement
SLIDE 5 â€” AVANT / APRÃˆS
Avant
improvisation
discours variable
rÃ©sultats instables
AprÃ¨s
mÃªme client = mÃªme dÃ©cision
tempo maÃ®trisÃ©
closing plus lent mais plus solide
ğŸ“ˆ + taux de signature Ã  J+7
SLIDE 6 â€” DÃ‰MONSTRATION RÃ‰ELLE
Tu montres :
une dÃ©cision Agent Zero
l'ordre des modules
ce qui est dÃ©sactivÃ© (scarcity = false)
ğŸ‘‰ C'est ici que tu gagnes la crÃ©dibilitÃ©
SLIDE 7 â€” POURQUOI C'EST INATTAQUABLE
BarriÃ¨res
rÃ¨gles mÃ©tiers non publiques
certification obligatoire
dÃ©pendance comportementale
intÃ©gration profonde UI
ğŸš« Impossible Ã  "copier vite"
SLIDE 8 â€” BUSINESS MODEL
Revenus
SaaS par siÃ¨ge
certification obligatoire
recertification annuelle
audit & conseil
Exemple
100 commerciaux â†’ ARR trÃ¨s stable
churn faible
usage quotidien
SLIDE 9 â€” MARCHÃ‰
Point clÃ©
ğŸ‘‰ Ce n'est pas un marchÃ© logiciel. C'est un marchÃ© de dÃ©cisions.
Secteurs :
solaire
immobilier
assurance
finance
B2B complexe
Chaque industrie = nouveau jeu de rÃ¨gles
SLIDE 10 â€” STRATÃ‰GIE DE DÃ‰PLOIEMENT
Vertical unique (dÃ©jÃ  fait)
Certification obligatoire
RÃ©fÃ©rences clients
Extension industries
SLIDE 11 â€” POURQUOI MAINTENANT
IA partout â†’ confusion
Pression rÃ©glementaire
Clients plus mÃ©fiants
Besoin de confiance
ğŸ‘‰ Le timing est parfait
SLIDE 12 â€” Ã‰QUIPE (TRÃˆS IMPORTANT)
Tu ne vends pas une team "tech".
Tu vends :
une obsession du risque
une comprÃ©hension du closing rÃ©el
une architecture de dÃ©cision
ğŸ‘‰ MÃªme seul, c'est crÃ©dible.
SLIDE 13 â€” DEMANDE (OPTIONNEL)
Investissement ou partenariat
DÃ©ploiement pilote
Co-construction sectorielle
G.1 â€” VARIANTES DU DECK
VC
scalabilitÃ©
moat
ARR
Industriel
standardisation
rÃ©duction des pertes
conformitÃ©
Client
ROI
fiabilitÃ©
contrÃ´le humain
G.2 â€” ERREURS Ã€ NE JAMAIS FAIRE
âŒ parler de "prompt"
âŒ parler de "chat"
âŒ parler de "GPT"
âŒ promettre de la magie
âœ… parler de dÃ©cision
âœ… parler de garde-fous
âœ… parler de rÃ©duction du risque
PARTIE 18 : GUIDES TECHNIQUES COMPLETS
<a name="guide-pythonanywhere"></a>
GUIDE PYTHONANYWHERE (DÃ‰PLOIEMENT COMPLET)
CONTEXTE
C'est le moment du pivot stratÃ©gique. Tu passes de "Nicolas le dÃ©veloppeur" Ã  "Nicolas le CEO Tech". Ce que tu as sous les yeux avec l'Etape E, c'est la feuille de route pour transformer ton code en actif financier.
Voici comment on va transformer ton architecture actuelle pour qu'elle supporte ce modÃ¨le SaaS, sans rien casser.
ğŸ§± E.1 & E.4 â€” ADAPTER LE MOTEUR AU MULTI-CLIENT
Pour que ton Agent Zero puisse gÃ©rer plusieurs entreprises (ex: EDF, Engie, une PME locale) tout en gardant les logs sÃ©parÃ©s, nous allons lÃ©gÃ¨rement modifier la fonction de logging.
Ouvre agent_zero_decide.py et modifie la fonction log_decision :


python
def log_decision(input_data: dict, decision: dict):
    try:
        # 1. On rÃ©cupÃ¨re l'identifiant client (ou "default")
        client_id = input_data.get("clientId", "default_client")

        # 2. On crÃ©e un sous-dossier par client
        log_dir = os.path.join("logs", "decisions", client_id)
        os.makedirs(log_dir, exist_ok=True)

        timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
        filename = f"{timestamp}.json"
        filepath = os.path.join(log_dir, filename)

        with open(filepath, "w") as f:
            json.dump({
                "timestamp": datetime.now().isoformat(),
                "client": client_id,  # TraÃ§abilitÃ© SaaS
                "user": input_data.get("userId", "anonymous"),
                "input": input_data,
                "decision": decision,
            }, f, indent=2)
    except Exception as e:
        print(f"âš ï¸ Erreur Log SaaS: {e}")
```

### ğŸŒ E.3 â€” PRÃ‰PARATION AU DÃ‰PLOIEMENT (Cloud-Ready)

Pour que ton API soit vendable, elle ne peut pas rester sur ton localhost.

**Le fichier requirements.txt :**  
C'est la "liste de courses" pour que le serveur Cloud sache quoi installer. CrÃ©e ce fichier dans ton dossier agent-zero/ :
```
flask
flask-cors
python-dotenv
Gestion de la ClÃ© API :
Ne laisse jamais ta clÃ© dev-secret-key en dur si tu vends le service. Utilise un fichier .env.
ğŸ’° E.6 â€” TON ARGUMENTAIRE DE VENTE (Le "Hook")
Quand tu prÃ©senteras Agent Zero, ne montre pas le code. Montre le fichier JSON de log.
Ton pitch :
"Regardez ce fichier. Ce n'est pas juste de la donnÃ©e, c'est une preuve d'audit. Si votre commercial a ratÃ© une vente de 30 000â‚¬, Agent Zero vous dit exactement quelle rÃ¨gle psychologique n'a pas Ã©tÃ© respectÃ©e et comment corriger le tir au prochain RDV."
ğŸš€ PROCHAINE ACTION IMMÃ‰DIATE
Pour valider que ton moteur est prÃªt pour le SaaS, fais un test "Multi-Client" :
Relance ton API.
Envoie un curl en ajoutant "clientId": "EDF_RENO" et "userId": "Jean_Vendeur".
VÃ©rifie que le dossier logs/decisions/EDF_RENO/ s'est crÃ©Ã© automatiquement.
GUIDE PAS Ã€ PAS PYTHONANYWHERE
Ã‰tape 1 : Inscription sur PythonAnywhere
Va sur PythonAnywhere.
Clique sur "Pricing & signup".
Choisis le "Beginner Account" (Gratuit). Note : Si plus tard tu as besoin d'appeler des API externes (comme OpenAI), il faudra passer au plan Ã  5$.
Important : Ton nom d'utilisateur dÃ©terminera ton URL (ex: nicolas.pythonanywhere.com). Choisis-le bien !
Ã‰tape 2 : Envoyer ton code
Une fois dans ton tableau de bord (Dashboard) :
Va dans l'onglet "Files".
CrÃ©e un dossier nommÃ© agent_zero.
Upload tes fichiers essentiels Ã  l'intÃ©rieur :
api_decide.py
agent_zero_decide.py
.env (avec ta clÃ© Titanium2025!)
Ã‰tape 3 : CrÃ©er l'environnement (Le terminal)
Va dans l'onglet "Consoles" et ouvre un Bash.
CrÃ©e ton environnement virtuel pour que le serveur ait les bons outils :


bash
mkvirtualenv --python=python3.10 agent-env
pip install flask flask-cors python-dotenv
(Laisse-le travailler, il installe tes bibliothÃ¨ques).
Ã‰tape 4 : Configurer l'application Web (Le moment clÃ©)
Va dans l'onglet "Web" (l'icÃ´ne mappemonde).
Clique sur "Add a new web app".
Passe les Ã©tapes de base (choisis "Manual Configuration" et "Python 3.10").
Dans la section "Virtualenv", entre le chemin : /home/TON_USER/.virtualenvs/agent-env.
Cherche le lien "WSGI configuration file" et clique dessus.
Efface tout le contenu du fichier et remplace-le par ceci :


python
import sys
import os

# On indique Ã  Python oÃ¹ se trouve ton code
path = '/home/TON_USER/agent_zero'
if path not in sys.path:
    sys.path.append(path)

os.chdir(path)

# On importe ton app Flask
from api_decide import app as application
```

(Remplace TON_USER par ton vrai nom d'utilisateur PythonAnywhere).

### COMMENT UPLOADER LES FICHIERS

C'est l'Ã©tape oÃ¹ tu transferts ton travail de ton Mac vers ton nouveau serveur. C'est trÃ¨s simple, voici comment faire graphiquement sur PythonAnywhere :

#### 1. Aller dans le gestionnaire de fichiers

Sur ton tableau de bord PythonAnywhere, clique sur l'onglet "Files" (en haut Ã  droite).

#### 2. CrÃ©er le dossier

1. Dans la colonne de gauche, sous "Directories", tu verras un champ de texte.
2. Tape agent_zero et clique sur le bouton "New directory".
3. Clique sur le nom du dossier agent_zero qui vient d'apparaÃ®tre pour entrer dedans.

#### 3. Envoyer les fichiers (Upload)

Une fois que tu es Ã  l'intÃ©rieur du dossier `/home/TON_USER/agent_zero/` :

1. Regarde sur la droite, il y a un bouton jaune "Upload a file".
2. Clique dessus et sÃ©lectionne api_decide.py sur ton Mac.
3. Recommence pour agent_zero_decide.py.

#### 4. Le cas particulier du fichier .env

Sur Mac, les fichiers commenÃ§ant par un point (comme .env) sont parfois cachÃ©s. Pour l'envoyer facilement :

1. Sur PythonAnywhere (toujours dans le dossier agent_zero), cherche le champ de texte sous "Upload a file" qui permet de crÃ©er un nouveau fichier ("Enter new file name").
2. Tape exactement .env et clique sur "New file".
3. Une page blanche s'ouvre. Copie et colle simplement ta ligne Ã  l'intÃ©rieur :
```
AGENT_ZERO_API_KEY=Titanium2025!
```

4. Clique sur le bouton bleu "Save" en haut Ã  droite.

#### ğŸ’¡ Astuce de vÃ©rification

Une fois terminÃ©, ta liste de fichiers dans le dossier agent_zero doit ressembler Ã  Ã§a :
```
__pycache__/ (peut-Ãªtre)
.env
agent_zero_decide.py
api_decide.py
INSTALLATION DES DÃ‰PENDANCES
Retourne dans ta Console Bash (celle oÃ¹ tu as fait le pip install).
Tape cette commande et appuie sur EntrÃ©e :


bash
pip3 install --user flask-cors python-dotenv
DÃ¨s que c'est fini (tu verras une ligne du genre Successfully installed...), on pourra configurer la Web App pour que ton API rÃ©ponde enfin Ã  l'adresse autopilote.pythonanywhere.com.
DÃ‰PLACER LES FICHIERS (SI NÃ‰CESSAIRE)
Si tes fichiers ne sont pas dans le bon dossier, tape ces deux commandes l'une aprÃ¨s l'autre :


bash
mv /home/autopilote/api_decide.py /home/autopilote/agent_zero/
mv /home/autopilote/agent_zero_decide.py /home/autopilote/agent_zero/
Comment vÃ©rifier ?
Tape ensuite :


bash
ls /home/autopilote/agent_zero/
Si tu vois les 3 fichiers s'afficher, c'est que tout est rentrÃ© dans l'ordre.
ğŸŒ L'Ã‰TAPE FINALE (La mise en ligne)
Une fois que les fichiers sont bien rangÃ©s, il ne reste plus qu'Ã  crÃ©er la "porte d'entrÃ©e" Web :
Clique sur l'onglet "Web" (l'icÃ´ne mappemonde en haut).
Clique sur "Add a new web app".
Choisis "Manual Configuration" puis "Python 3.10".
Dans la section "Code", vÃ©rifie que "Source code" pointe bien vers /home/autopilote/agent_zero.
Cherche la ligne "WSGI configuration file" (un lien bleu), clique dessus.
Efface tout le contenu et colle ceci Ã  la place :


python
import sys
import os

path = '/home/autopilote/agent_zero'
if path not in sys.path:
    sys.path.append(path)

os.chdir(path)

from api_decide import app as application
```

7. Une fois que c'est fait, clique sur "Save" puis sur le gros bouton vert "Reload" dans l'onglet Web.

Ton API sera officiellement en ligne Ã  l'adresse : `https://autopilote.pythonanywhere.com/decide` ! ğŸš€

---

<a name="guide-dashboard"></a>
## GUIDE DASHBOARD SAAS-READY

### Ã‰tape 5 : Rendre le Dashboard "SaaS-Ready"

Maintenant que ton API va avoir une adresse fixe (ex: https://nicolas.pythonanywhere.com/decide), tu ne peux plus laisser localhost Ã©crit en dur dans tes 9000 lignes de code React.

**La mÃ©thode Pro :**

Dans ton code React, crÃ©e un fichier .env.local Ã  la racine (si tu ne l'as pas dÃ©jÃ ) et mets-y :
```
REACT_APP_AGENT_ZERO_URL=https://TON_USER.pythonanywhere.com/decide
Et dans ton fichier ResultsDashboard.REFONTE2.tsx, remplace l'URL par :


javascript
const API_URL = process.env.REACT_APP_AGENT_ZERO_URL || "http://localhost:5050/decide";
PANNEAU DE CONFIGURATION CACHÃ‰
On va ajouter un "Panneau de Configuration" cachÃ© sur ton Dashboard pour changer l'URL de l'API en un clic.
On va utiliser un "Secret Handshake" : le panneau n'apparaÃ®tra que si tu cliques 5 fois sur le logo ou si tu connais le raccourci.
1. Ajouter l'Ã©tat pour l'URL et la visibilitÃ©
Tout en haut de ton composant, ajoute ces deux useState :


typescript
const [apiUrl, setApiUrl] = useState(localStorage.getItem('agent_zero_url') || "https://autopilote.pythonanywhere.com/decide");
const [showConfig, setShowConfig] = useState(false);
const [clickCount, setClickCount] = useState(0); // Pour le menu cachÃ©
2. CrÃ©er la fonction de sauvegarde
Cette fonction stockera l'URL dans le navigateur (LocalStorage), comme Ã§a, mÃªme si tu rafraÃ®chis la page, ton Dashboard se souviendra de ton serveur.


typescript
const saveConfig = (newUrl: string) => {
  setApiUrl(newUrl);
  localStorage.setItem('agent_zero_url', newUrl);
  setShowConfig(false);
  alert("Configuration mise Ã  jour !");
};
3. InsÃ©rer le Panneau de Configuration (Le UI)
Ajoute ce bloc de code tout Ã  la fin de ton JSX, juste avant la derniÃ¨re balise </div>. Il s'affichera par-dessus le reste comme une fenÃªtre de rÃ©glage pro.


typescript
{/* Panneau de Configuration CachÃ© */}
{showConfig && (
  <div style={{
    position: 'fixed', bottom: '20px', right: '20px', backgroundColor: '#1a1a1a',
    padding: '20px', borderRadius: '12px', border: '1px solid #333', zIndex: 9999,
    boxShadow: '0 10px 25px rgba(0,0,0,0.5)', color: 'white', width: '300px'
  }}>
    <h4 style={{ margin: '0 0 15px 0' }}>âš™ï¸ SaaS Configuration</h4>
    <label style={{ fontSize: '12px', opacity: 0.7 }}>API ENDPOINT URL</label>
    <input
      type="text"
      value={apiUrl}
      onChange={(e) => setApiUrl(e.target.value)}
      style={{
        width: '100%', padding: '8px', marginTop: '5px', borderRadius: '4px',
        border: '1px solid #444', backgroundColor: '#000', color: '#00ff00'
      }}
    />
    <div style={{ marginTop: '15px', display: 'flex', gap: '10px' }}>
      <button onClick={() => saveConfig(apiUrl)} style={{ backgroundColor: '#007bff', color: 'white', border: 'none', padding: '8px 12px', borderRadius: '4px', cursor: 'pointer', flex: 1 }}>Sauvegarder</button>
      <button onClick={() => setShowConfig(false)} style={{ backgroundColor: '#333', color: 'white', border: 'none', padding: '8px 12px', borderRadius: '4px', cursor: 'pointer' }}>Annuler</button>
    </div>
  </div>
)}
4. Le dÃ©clencheur (L'astuce de l'Easter Egg)
Pour ne pas polluer l'interface, on va lier l'ouverture au logo de ton Dashboard. Trouve ton image de logo et ajoute ceci :


typescript
<img
  src="logo.png"
  onClick={() => {
    setClickCount(prev => prev + 1);
    if (clickCount >= 4) { // Au 5Ã¨me clic
      setShowConfig(true);
      setClickCount(0);
    }
  }}
  style={{ cursor: 'pointer' }}
  alt="Logo"
/>
LA FONCTION FETCH DYNAMIQUE
Voici le code de la fonction fetch mis Ã  jour. Elle est maintenant "intelligente" : elle utilise l'URL que tu as dÃ©finie dans ton panneau de configuration (ou celle par dÃ©faut) et gÃ¨re proprement les erreurs de connexion.
Remplace ton ancienne fonction d'appel Ã  l'IA par celle-ci dans ResultsDashboard.REFONTE2.tsx :


typescript
const getAgentDecision = async (data: any) => {
  try {
    console.log("ğŸš€ Envoi vers l'API:", apiUrl); // Utilise la variable du useState

    const response = await fetch(apiUrl, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "X-API-KEY": "Titanium2025!" // Ta clÃ© configurÃ©e dans le .env sur PythonAnywhere
      },
      body: JSON.stringify(data),
    });

    if (!response.ok) {
      const errorText = await response.text();
      throw new Error(`Erreur Serveur (${response.status}): ${errorText}`);
    }

    const decision = await response.json();
    console.log("ğŸ§  DÃ©cision reÃ§ue de l'Agent Zero:", decision);
    return decision;

  } catch (error) {
    console.error("âŒ Ã‰chec de la connexion Ã  l'IA:", error);
    // Optionnel : Alerte l'utilisateur si l'URL est mauvaise
    alert("Impossible de joindre l'IA. VÃ©rifie l'URL de l'API dans le panneau de config.");
    return null;
  }
};
<a name="guide-licensing"></a>
GUIDE LICENSING MULTI-CLIENTS
FICHIER tenants_config.py
Pour l'Ã‰tape I (Licensing & White-Label), tout se passe sur ton serveur PythonAnywhere. On va crÃ©er un nouveau fichier pour gÃ©rer tes clients et modifier ton fichier API pour qu'il devienne un contrÃ´leur d'accÃ¨s.
Dans le dossier /home/autopilote/agent_zero/, crÃ©e ce fichier. C'est ici que tu listes tes clients et leurs droits.


python
# /home/autopilote/agent_zero/tenants_config.py

TENANTS = {
    "EDF_PROD_2026": {
        "name": "EDF Renouvelables",
        "industry": "energy",
        "status": "active",
        "api_key": "Titanium2026!EDF",
        "features": ["scarcity_disabled", "compliance_audit"],
        "max_decisions": 10000
    },
    "BNP_TEST_2026": {
        "name": "BNP Paribas Cardif",
        "industry": "banking",
        "status": "active",
        "api_key": "Gold2026!BNP",
        "features": ["strict_risk_aversion"],
        "max_decisions": 500
    }
}
MODIFICATION API : api_decide.py
Tu dois mettre Ã  jour ton fichier Flask pour qu'il vÃ©rifie qui appelle l'IA.


python
# Dans /home/autopilote/agent_zero/api_decide.py
from tenants_config import TENANTS

@app.route('/decide', methods=['POST'])
def decide():
    # 1. VÃ©rifier la clÃ© API du client (Licensing)
    client_key = request.headers.get('X-API-KEY')
    
    # 2. Identifier le client (Tenant)
    current_tenant = None
    for tid, config in TENANTS.items():
        if config['api_key'] == client_key:
            current_tenant = config
            break
            
    if not current_tenant or current_tenant['status'] != 'active':
        return jsonify({"error": "Licence invalide ou expirÃ©e"}), 403

    # 3. Charger les rÃ¨gles spÃ©cifiques Ã  l'industrie du client
    industry = current_tenant['industry']
    
    # ... le reste de ta logique Agent Zero ...
    
    # 4. Ajouter le "Vernis LÃ©gal" (Ã‰tape J) dans la rÃ©ponse
    decision['audit'] = {
        "tenant": current_tenant['name'],
        "compliance": "STRICT",
        "rules_applied": current_tenant['features']
    }
    
    return jsonify(decision)
MODIFICATION DASHBOARD : AJOUT CLÃ‰ API
1. La mÃ©moire de la clÃ© (Le State)
Place ceci tout en haut de ton composant, lÃ  oÃ¹ se trouvent tes autres variables useState :


typescript
// On essaie de rÃ©cupÃ©rer une clÃ© dÃ©jÃ  enregistrÃ©e, sinon on met vide
const [apiKey, setApiKey] = useState(localStorage.getItem('agent_zero_key') || '');

// On crÃ©e une fonction pour sauvegarder proprement
const saveConfig = (newUrl: string, newKey: string) => {
  setApiUrl(newUrl);
  setApiKey(newKey);
  localStorage.setItem('agent_zero_url', newUrl);
  localStorage.setItem('agent_zero_key', newKey);
  setShowConfig(false); // Ferme le panneau
};
2. Le visuel du panneau (Le JSX)
Remplace le contenu de ton panneau de configuration (la fenÃªtre qui s'est ouverte) par ceci pour avoir les deux champs :


typescript
{showConfig && (
  <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-[9999]">
    <div className="bg-white p-6 rounded-xl shadow-2xl w-96">
      <h3 className="text-lg font-bold mb-4">âš™ï¸ Configuration SaaS</h3>
      
      <div className="space-y-4">
        <div>
          <label className="block text-xs font-bold text-gray-400 uppercase">Serveur API</label>
          <input 
            className="w-full p-2 border rounded mt-1 text-sm"
            value={apiUrl}
            onChange={(e) => setApiUrl(e.target.value)}
          />
        </div>

        <div>
          <label className="block text-xs font-bold text-gray-400 uppercase">ClÃ© de Licence (X-API-KEY)</label>
          <input 
            className="w-full p-2 border rounded mt-1 font-mono text-sm"
            value={apiKey}
            onChange={(e) => setApiKey(e.target.value)}
            placeholder="Titanium2026!EDF"
          />
        </div>
      </div>

      <div className="mt-6 flex gap-2">
        <button 
          onClick={() => saveConfig(apiUrl, apiKey)}
          className="flex-1 bg-blue-600 text-white py-2 rounded font-bold"
        >
          SAUVEGARDER
        </button>
      </div>
    </div>
  </div>
)}
3. L'envoi sÃ©curisÃ© (La fonction Fetch)
Enfin, assure-toi que ta fonction qui appelle PythonAnywhere utilise bien ce header X-API-KEY :


typescript
const callAgentZero = async () => {
  try {
    const response = await fetch(apiUrl, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'X-API-KEY': apiKey // <--- C'est ici que la magie opÃ¨re
      },
      body: JSON.stringify(simulationData)
    });
    const result = await response.json();
    setAgentDecision(result);
  } catch (error) {
    console.error("Erreur de licence ou de rÃ©seau", error);
  }
};
<a name="guide-audit"></a>
GUIDE COMPOSANT AUDIT & CONFORMITÃ‰
C'est ce qui sÃ©pare le "gadget" de l'outil institutionnel. On va transformer ton Dashboard pour qu'il devienne un vÃ©ritable bouclier juridique pour tes futurs clients comme EDF ou des banques.
Voici comment intÃ©grer le Composant Audit & ConformitÃ© (Ã‰tape J) dans ton fichier ResultsDashboard.REFONTE2.tsx.
1. Le Composant Visuel "Audit Shield"
Ajoute ce bloc de code en bas de ton interface, juste aprÃ¨s l'affichage des rÃ©sultats de l'IA. Ce bloc affiche clairement que Agent Zero est un garde-fou, pas un robot qui remplace l'humain.


typescript
{/* BLOC LÃ‰GAL & CONFORMITÃ‰ - Ã‰TAPE J */}
<div className="mt-8 p-4 bg-slate-50 border-t border-slate-200 rounded-b-xl">
  <div className="flex items-center justify-between opacity-75">
    <div className="flex items-center gap-3">
      <div className="p-2 bg-blue-100 rounded-full text-blue-700">
        <ShieldCheck size={18} />
      </div>
      <div>
        <p className="text-[10px] font-bold text-slate-500 uppercase tracking-widest">
          Certification de ConformitÃ©
        </p>
        <p className="text-xs text-slate-400 italic">
          "Agent Zero ne cherche pas Ã  convaincre. Il empÃªche de mal dÃ©cider."
        </p>
      </div>
    </div>
    
    <div className="text-right">
      <p className="text-[10px] font-mono text-slate-400">
        ID AUDIT: {agentDecision?.auditTrail?.audit_id || 'NON-CERTIFIÃ‰'}
      </p>
      <p className="text-[10px] font-mono text-slate-400 uppercase">
        PACK: {agentDecision?.auditTrail?.industry || 'STANDARD'}
      </p>
    </div>
  </div>

  <div className="mt-4 grid grid-cols-2 gap-4 text-[9px] text-slate-400 border-t border-slate-100 pt-3">
    <p>âœ… Gouvernance stricte : aucune donnÃ©e client persistÃ©e.</p>
    <p>âœ… Orchestration interne : aide Ã  la dÃ©cision conseiller.</p>
  </div>
</div>
2. Le bouton "GÃ©nÃ©rer Certificat d'Audit"
On ajoute une fonction dans ton fichier ResultsDashboard.REFONTE2.tsx qui crÃ©e un rapport de conformitÃ© propre.
Le code Ã  insÃ©rer dans ton Dashboard (React) :


typescript
// 1. Fonction pour gÃ©nÃ©rer le rapport (Ã‰tape J)
const generateAuditReport = () => {
  const auditData = {
    timestamp: new Date().toLocaleString(),
    auditId: agentDecision?.auditTrail?.audit_id || `AZ-${Math.random().toString(36).toUpperCase().substr(2, 9)}`,
    client: agentDecision?.auditTrail?.client || "CLIENT_PROSPECTION",
    status: "STRICT_CONFORMITY_VALIDATED",
    rules: [
      "ZÃ©ro gÃ©nÃ©ration de texte client (Anti-hallucination)",
      "Orchestration neutre des calculs financiers",
      "Garde-fous mÃ©tier appliquÃ©s : 100%",
      "Aucune persistance de donnÃ©es sensibles (RGPD)"
    ]
  };

  alert(`ğŸ›¡ï¸ CERTIFICAT D'AUDIT GÃ‰NÃ‰RÃ‰\n\nID: ${auditData.auditId}\nClient: ${auditData.client}\nStatut: ${auditData.status}\n\n"Agent Zero empÃªche de mal dÃ©cider."`);
};

// 2. Le bouton Ã  placer juste au-dessus du bloc Audit Shield
<button 
  onClick={generateAuditReport}
  className="w-full mt-4 bg-slate-800 hover:bg-black text-white py-3 rounded-lg font-bold text-sm transition-all flex items-center justify-center gap-2 shadow-lg"
>
  <FileCheck size={20} />
  GÃ‰NÃ‰RER LE CERTIFICAT DE CONFORMITÃ‰ (LÃ‰GAL)
</button>
ANNEXES
<a name="annexe-1"></a>
ANNEXE 1 : INDEX DE RECONSTRUCTION (GPS)
DÃ©marrer vite
Intention fondatrice : Â§0, Â§1, Â§2
Principe sacrÃ© (zÃ©ro texte client) : Â§3
Architecture
SÃ©paration Core / UI / DonnÃ©es : Â§4
DÃ©pÃ´ts canoniques : Â§18
White-label & plugins : Â§31â€“33, Â§44
Contrats JSON
Input (DecisionContext / ProfileDetectionResult) : Â§6
Output (DecisionPlan) : Â§7
Champ reasoning obligatoire : Â§7, Â§36
RÃ¨gles & Moat
RÃ¨gles absolues : Â§8
Historique des rÃ¨gles : Â§61
RÃ¨gles irrÃ©vocables : Â§61.2
Front (exÃ©cutant)
RÃ´le strict du front : Â§14
Interdictions UI : Â§9, Â§29
Mode dÃ©gradÃ© : Â§10, Â§25, Â§62
API & Python
agent_zero_decide.py : Â§11
api_decide.py : Â§12
Installation from scratch : Â§19â€“21
Bugs vitaux (Ã  relire AVANT de coder)
Liste complÃ¨te : Â§15, Â§22, Â§53
LÃ©gal / Audit / ConformitÃ©
Position juridique : Â§35
AuditabilitÃ© : Â§36
PiÃ¨ges lÃ©gaux : Â§38
<a name="annexe-2"></a>
ANNEXE 2 : CHECKLIST MACHINE VIERGE (PAS Ã€ PAS)
PrÃ©-requis
macOS / Linux
Python 3.11+
Node 18+
npm
curl
Ã‰tape A â€” Clonage
Cloner :
/agent-zero
/EDF-DASHBOARD-TEST
/docs
Ã‰tape B â€” Python (Core)


bash
cd agent-zero
python3 -m venv .venv
source .venv/bin/activate
which python  # DOIT pointer vers .venv
pip install -r requirements.txt
Test :


bash
python3 -c "import flask; print(flask.__version__)"
Ã‰tape C â€” Variables d'environnement
CrÃ©er .env (non commitÃ©) :
FLASK_SECRET_KEY
WEB_UI_HOST
WEB_UI_PORT
Ã‰tape D â€” Lancer l'API


bash
python3 api_decide.py
Test vital :


bash
curl -X POST http://localhost:5050/decide -H "Content-Type: application/json" -d '{...}'
â¡ï¸ RÃ©sultat attendu : JSON strict, zÃ©ro texte libre.
Ã‰tape E â€” Front


bash
cd EDF-DASHBOARD-TEST
npm install
npm run dev
Ã‰tape F â€” Connexion Front â†” Core
Le front POSTE un DecisionContext
Le front EXÃ‰CUTE le DecisionPlan
Aucun calcul cÃ´tÃ© UI
Ã‰tape G â€” Test panne
Couper l'API
Le front DOIT afficher : "Mode non optimisÃ© â€” dÃ©cision humaine"
<a name="annexe-3"></a>
ANNEXE 3 : EXTRACTION RÃˆGLES SACRÃ‰ES
RÃˆGLES NON NÃ‰GOCIABLES
âŒ Jamais de texte client cÃ´tÃ© cerveau
âŒ Jamais de dÃ©cision UI
âŒ Jamais de fallback silencieux
âŒ Scarcity interdite pour profils seniors (Ã  vie)
âŒ Peur > Urgence
âŒ Aucune donnÃ©e mÃ©tier dans le Core
âŒ Aucune exception "temporaire"
âŒ **Agent Zero ne sait pas pour qui il travaille
âŒ Pas de Core configurable librement
âŒ Mieux vaut perdre une vente que violer une rÃ¨gle
<a name="annexe-4"></a>
ANNEXE 4 : RUNBOOK RECONSTRUCTION 1 AN
Ordre OBLIGATOIRE
Relire Â§0â€“Â§4 (intention + architecture)
Relire Â§8 + Â§61 (rÃ¨gles + histoire)
Installer Core seul (sans UI)
Tester rÃ¨gles avec agent_zero_decide.py
Exposer API (api_decide.py)
Brancher UI comme exÃ©cutant
Tester panne + licence invalide
Questions de contrÃ´le (avant toute modif)
Est-ce que Ã§a rÃ©duit le risque ?
Est-ce que Ã§a introduit du texte ?
Est-ce que Ã§a donne plus de libertÃ© humaine ?
Est-ce que c'est auditable ?
ğŸ‘‰ Un seul oui = REFUS.
Signaux d'alerte rouge
"Juste pour ce client"
"Temporairement"
"Le front peut gÃ©rer"
"On verra plus tard"
â¡ï¸ Ces phrases ont dÃ©jÃ  cassÃ© des systÃ¨mes.
RÃˆGLE FINALE
Si tu hÃ©sites :
ProtÃ¨ge la rÃ¨gle.
ProtÃ¨ge l'audit.
ProtÃ¨ge la sÃ©paration.
Le reste est secondaire.
<a name="annexe-5"></a>
ANNEXE 5 : MAIL STRATÃ‰GIQUE GRANDS COMPTES
Objet : SÃ©curisation et auditabilitÃ© des dÃ©cisions conseillers : Architecture Agent Zero
Ã€ l'attention de la Direction de la ConformitÃ© / Direction des Risques,
Madame, Monsieur,
L'intÃ©gration de l'Intelligence Artificielle au sein des rÃ©seaux de vente crÃ©e aujourd'hui un paradoxe majeur : une augmentation de la productivitÃ©, mais une perte totale de contrÃ´le sur la conformitÃ© et l'homogÃ©nÃ©itÃ© des conseils dÃ©livrÃ©s.
Nous avons dÃ©veloppÃ© Agent Zero, un systÃ¨me d'orchestration dÃ©cisionnelle conÃ§u spÃ©cifiquement pour les grands rÃ©seaux (Ã‰nergie, Banque, Assurance).
Contrairement aux solutions d'IA gÃ©nÃ©rative classiques, Agent Zero repose sur trois piliers de gouvernance stricte :
Non-gÃ©nÃ©ration de discours : Le systÃ¨me ne gÃ©nÃ¨re aucun texte client, Ã©liminant ainsi tout risque d'hallucination ou de promesse commerciale non conforme.
AuditabilitÃ© totale : Chaque validation de dossier gÃ©nÃ¨re un ID d'audit unique et infalsifiable, permettant une traÃ§abilitÃ© complÃ¨te devant un rÃ©gulateur.
Architecture Ã©tanche : Un dÃ©ploiement en mode "Licensing contrÃ´lÃ©" qui garantit la non-persistance des donnÃ©es sensibles tout en maintenant la logique mÃ©tier sous haute surveillance.
Notre approche ne cherche pas Ã  remplacer le conseiller, mais Ã  l'empÃªcher de mal dÃ©cider en lui imposant un cadre de conformitÃ© dynamique en temps rÃ©el.
Seriez-vous ouvert Ã  une prÃ©sentation de 15 minutes sur notre mÃ©thodologie de rÃ©duction du risque opÃ©rationnel ?
Bien cordialement,
[Ton Nom]
Fondateur - Agent Zero Architecture
ğŸ”’ FIN DE LA BIBLE INTÃ‰GRALE CANONIQUE
Document complet. Aucune modification future de ce texte.
Toute Ã©volution se fera par documents annexes versionnÃ©s.
Agent Zero est dÃ©sormais documentÃ©, transmissible, reproductible, industrialisable et dÃ©fendable juridiquement

CORRECTION ARCHITECTURALE CRITIQUE
OUI ET NON â€” PRÃ‰CISION VITALE
âœ… CE QUI EST CORRECT
Oui, la dÃ©tection de profil est le dÃ©clencheur de toute la chaÃ®ne dÃ©cisionnelle.
Flux correct :
1. SPEECHVIEW dÃ©tecte le profil psychologique
   â†“
2. ProfileDetectionResult est gÃ©nÃ©rÃ©
   â†“
3. Ce profil est envoyÃ© Ã  AGENT ZERO
   â†“
4. AGENT ZERO dÃ©cide de l'orchestration
   â†“
5. Le Dashboard exÃ©cute la dÃ©cision

âŒ CE QUI DOIT ÃŠTRE PRÃ‰CISÃ‰ (ULTRA IMPORTANT)
SPEECHVIEW et AGENT ZERO sont DEUX CERVEAUX DIFFÃ‰RENTS.
Ils ne font PAS la mÃªme chose.

ğŸ§  SPEECHVIEW (Le DÃ©tecteur)
RÃ´le unique :
Analyser la faÃ§on de parler du client pour dÃ©tecter son profil psychologique.
Ce qu'il fait :

Ã‰coute le discours
DÃ©tecte les signaux (peur, dÃ©fiance, fatigue, opportunitÃ©)
Produit un ProfileDetectionResult

Ce qu'il NE fait PAS :

Il ne dÃ©cide PAS de l'ordre des modules
Il ne dÃ©cide PAS du tempo
Il ne dÃ©cide PAS d'activer/dÃ©sactiver la scarcity

Output de SPEECHVIEW :
json{
  "profile": "senior",
  "modes": {
    "defiance": true,
    "opportunity": false,
    "fatigueCognitive": false
  },
  "signals": {
    "peurDeSeTromper": true,
    "besoinDeChiffres": false,
    "urgencePercue": false,
    "indecision": true
  }
}
ğŸ‘‰ C'est un diagnostic, PAS une prescription.

ğŸ§  AGENT ZERO (Le DÃ©cideur)
RÃ´le unique :
Prendre le diagnostic de SPEECHVIEW et dÃ©cider de l'orchestration commerciale.
Ce qu'il fait :

ReÃ§oit le ProfileDetectionResult de SPEECHVIEW
Applique les rÃ¨gles dÃ©cisionnelles (les fameuses rÃ¨gles irrÃ©vocables)
Produit un DecisionPlan (ordre, tempo, leviers)

Ce qu'il NE fait PAS :

Il ne parle PAS au client
Il ne gÃ©nÃ¨re PAS de texte
Il ne dÃ©tecte PAS le profil (c'est le job de SPEECHVIEW)

Output d'AGENT ZERO :
json{
  "moduleOrder": ["realisations", "garanties-long-terme", "prise-en-charge-admin", "budget", "synthese"],
  "presentationTempo": "slow",
  "enable": {
    "scarcity": false,
    "comparisons": true,
    "longTermProjections": true
  },
  "tooltipsEnabled": ["security", "institutional"],
  "summaryStyle": "institutional",
  "confidenceScore": 0.8,
  "reasoning": {
    "guardrailsActive": ["no_text_generation", "no_number_mutation"],
    "rulesApplied": ["profile_senior", "fear_overrides_urgency", "defiance_no_scarcity"],
    "triggers": []
  }
}
```

ğŸ‘‰ **C'est une prescription exÃ©cutable.**

---

## ğŸ”— LA CHAÃNE COMPLÃˆTE (VITALE Ã€ COMPRENDRE)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SPEECHVIEW    â”‚  â† Analyse le discours client
â”‚  (DÃ©tecteur)    â”‚     DÃ©tecte les signaux psychologiques
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ ProfileDetectionResult
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   AGENT ZERO    â”‚  â† Applique les rÃ¨gles dÃ©cisionnelles
â”‚   (DÃ©cideur)    â”‚     Interdit certaines actions (scarcity, etc.)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ DecisionPlan
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DASHBOARD     â”‚  â† ExÃ©cute l'orchestration
â”‚  (ExÃ©cutant)    â”‚     Affiche les modules dans l'ordre imposÃ©
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âš ï¸ ERREUR FATALE Ã€ Ã‰VITER
NE JAMAIS confondre les deux cerveaux.
âŒ Mauvaise architecture :
"SPEECHVIEW dÃ©cide de l'ordre des modules"
âœ… Bonne architecture :
"SPEECHVIEW dÃ©tecte â†’ AGENT ZERO dÃ©cide â†’ DASHBOARD exÃ©cute"

ğŸ“‹ CHECKLIST DE VÃ‰RIFICATION
Pour savoir si tu as bien compris :

 SPEECHVIEW dÃ©tecte le profil psychologique
 SPEECHVIEW ne dÃ©cide RIEN sur l'orchestration
 AGENT ZERO reÃ§oit le profil de SPEECHVIEW
 AGENT ZERO applique les rÃ¨gles (peur > urgence, scarcity interdite senior, etc.)
 AGENT ZERO produit un plan d'action strict
 Le DASHBOARD obÃ©it au plan d'AGENT ZERO
 Le DASHBOARD ne dÃ©cide JAMAIS de rien


ğŸ¯ RÃ‰SUMÃ‰ ULTRA-COURT
SPEECHVIEW = Les yeux
(Il voit et comprend le client)
AGENT ZERO = Le cerveau
(Il dÃ©cide de la stratÃ©gie Ã  adopter)
DASHBOARD = Les mains
(Il exÃ©cute ce que le cerveau a dÃ©cidÃ©)

ğŸ›¡ï¸ RÃˆGLE ABSOLUE FINALE
Si SPEECHVIEW disparaÃ®t demain :
â†’ AGENT ZERO peut toujours fonctionner (avec un profil saisi manuellement)
Si AGENT ZERO disparaÃ®t demain :
â†’ Le systÃ¨me s'effondre (le Dashboard n'a plus de cerveau)
Si le DASHBOARD disparaÃ®t demain :
â†’ AGENT ZERO survit (on peut en rebrancher un autre)# SECTION 68 â€” SPEECHVIEW v1.1 (PHILOSOPHIE ANTI-PERFECTION)

## 68.1 INTENTION FONDATRICE (NON NÃ‰GOCIABLE)

**SPEECHVIEW est un capteur imparfait par design.**

Toute tentative de le rendre "parfait" est une faute architecturale.

### Pourquoi ?

1. **La perfection en dÃ©tection n'existe pas**
   - Un humain ne sait pas toujours pourquoi il dÃ©cide
   - Une IA qui prÃ©tend "tout savoir" hallucine
   - La sur-interprÃ©tation crÃ©e de la manipulation

2. **Le pouvoir doit rester dans Agent Zero**
   - SPEECHVIEW = capteur (diagnostic)
   - AGENT ZERO = dÃ©cideur (prescription)
   - Si SPEECHVIEW devient "trop fin", il prend le pouvoir

3. **Le risque juridique augmente**
   - Plus SPEECHVIEW est fin, plus il "profile" le client
   - Profiling sensible = risque RGPD + Ã©thique
   - EDF + terrain + one-shot = tolÃ©rance zÃ©ro

---

## 68.2 RÃˆGLES ABSOLUES (GRAVÃ‰ES)

### RÃ¨gle 1 â€” SPEECHVIEW ne dÃ©cide JAMAIS
Il dÃ©tecte + alerte.  
Agent Zero a le dernier mot sur TOUT.

### RÃ¨gle 2 â€” DÃ©gradation volontaire du profil
Un profil peut devenir **plus prudent**, JAMAIS **plus agressif**.

Exemples autorisÃ©s :
- Senior â†’ Senior-DÃ©fiant âœ…
- Banquier â†’ Senior (si score faible) âœ…

Exemples INTERDITS :
- Senior â†’ Opportuniste âŒ
- Standard â†’ Agressif âŒ

### RÃ¨gle 3 â€” En cas de doute â†’ bascule Senior
Protection J+7 prioritaire.

### RÃ¨gle 4 â€” Les alertes sont des signaux, PAS des dÃ©cisions
SPEECHVIEW peut dire :
- "Attention" âœ…
- "Incertitude" âœ…
- "Profil flou" âœ…

SPEECHVIEW ne doit JAMAIS dire :
- "Ce client est prÃªt" âŒ
- "C'est le bon moment" âŒ
- "Pousse maintenant" âŒ

---

## 68.3 GARDE-FOUS IMPLÃ‰MENTÃ‰S (v1.1)

### 1. Option "Je ne sais pas / Ã‡a dÃ©pend"
**Objectif :** DÃ©tecter fatigue cognitive / surcharge dÃ©cisionnelle

**Seuils :**
- â‰¥2 rÃ©ponses neutres â†’ `fatigueSuspected = true`
- â‰¥3 rÃ©ponses neutres â†’ `fatigueCritical = true`

**Impact Agent Zero :**
- Fatigue suspectÃ©e â†’ tempo `slow`
- Fatigue critique â†’ tempo `slow` + parcours minimal + zÃ©ro tooltips

### 2. DÃ©tection contradictions dÃ©claratives
**Exemple typique :**
- Client rÃ©pond "ÃŠtre rassurÃ© sur tout" (Senior)
- ET "C'est le bon moment" (Opportuniste)

**Action :**
- `incoherentAnswers = true`
- Bascule â†’ Senior (protection)

### 3. Banquier faible (<4 points) â†’ Senior
**Logique :**
- Un faux banquier est plus dangereux qu'un faux senior
- Faux senior â†’ trop prudent (safe)
- Faux banquier â†’ trop rationnel, pas assez rassurant (risque J+7)

### 4. Senior proche du gagnant (â‰¤2 points) â†’ Senior
**Exemple :**
- Banquier : 6 points
- Senior : 5 points
- Ã‰cart = 1 point

**Action :**
- Bascule â†’ Senior (sÃ©curisation)

---

## 68.4 CE QUI EST TRANSMIS Ã€ AGENT ZERO
```typescript
interface DetectionAlerts {
  incoherentAnswers: boolean;      // Contradictions dÃ©claratives
  fatigueSuspected: boolean;       // â‰¥2 rÃ©ponses "Je ne sais pas"
  fatigueCritical: boolean;        // â‰¥3 rÃ©ponses "Je ne sais pas"
  profileUncertain: boolean;       // Ã‰cart faible entre profils
  banquierFaible: boolean;         // Score banquier <4 â†’ suspect
}

interface ProfileDetectionResult {
  profile: BaseProfile;              // Profil final (aprÃ¨s normalisation)
  signals: PsychoSignals;            // Signaux psychologiques
  alerts: DetectionAlerts;           // Garde-fous activÃ©s
  rawScores: ScoreMap;               // Scores bruts (audit)
  neutralAnswersCount: number;       // Nombre de "Je ne sais pas"
  timestamp: string;                 // Horodatage (audit)
}
```

---

## 68.5 PROCÃ‰DURE ANTI-DÃ‰RIVE (GOUVERNANCE)

### Toute modification de SPEECHVIEW doit rÃ©pondre OUI Ã  ces 5 questions :

1. **Est-ce que Ã§a rÃ©duit le risque dÃ©cisionnel ?**
2. **Est-ce que Ã§a reste auditable ?**
3. **Est-ce que Ã§a ne dÃ©place PAS le pouvoir hors d'Agent Zero ?**
4. **Est-ce que Ã§a ne profils PAS le client de maniÃ¨re sensible ?**
5. **Est-ce que Ã§a assume l'incertitude au lieu de la masquer ?**

ğŸ‘‰ **Un seul "NON" = modification refusÃ©e.**

### Signaux d'alerte rouge (dÃ©rive en cours) :

- "On pourrait affiner encore"
- "Juste un petit signal en plus"
- "On pourrait deviner l'intention"
- "C'est plus prÃ©cis comme Ã§a"

ğŸ‘‰ **Ces phrases ont dÃ©jÃ  cassÃ© des systÃ¨mes entiers.**

---

## 68.6 PHRASE CANONIQUE (Ã€ GRAVER)

**"SPEECHVIEW est un capteur imparfait par design.**  
**Il n'a pas le droit de dÃ©cider.**  
**Il a le droit (et le devoir) de signaler le doute.**  
**Toute tentative de le rendre parfait est une faute architecturale."**

---

---

## 68.7 LE CAS SPÃ‰CIFIQUE DU MODE OPPORTUNISTE

Le mode **Opportuniste** n'est PAS un profil dÃ©tectÃ© par SpeechView.
C'est un Ã©tat dÃ©rivÃ© calculÃ© par le Dashboard si et seulement si :

1.  **Profil de base = Standard**
2.  **Aucune alerte active** (pas de peur, pas d'incertitude)
3.  **Aucun signal nÃ©gatif**

### Logique d'activation (Code Souverain) :
```typescript
opportunity: (
  profileResult.profile === "standard" &&
  !profileResult.signals.peurDeSeTromper &&
  !profileResult.signals.indecision &&
  !profileResult.alerts.profileUncertain &&
  !profileResult.alerts.incoherentAnswers &&
  !profileResult.alerts.fatigueSuspected
)
```

**Si une seule de ces conditions Ã©choue â†’ Le mode retombe Ã  STANDARD (Methodical).**

---

## 68.8 TESTS DE ROBUSTESSE (OBLIGATOIRES AVANT DÃ‰PLOIEMENT)

Voir Section 69 â€” Checklist Validation Terrain

---

FIN SECTION 68

# SECTION 69 â€” CHECKLIST VALIDATION SPEECHVIEW v1.1

## 69.1 SCÃ‰NARIOS OBLIGATOIRES (AVANT DÃ‰PLOIEMENT)

## 69.1 SUITE DE VALIDATION COMPLÃˆTE (7 TESTS)

### PHASE 1 : VALIDATION DES PROFILS (4 TESTS)

#### Test 1 â€” Senior Pur
- **RÃ©ponses :** 4x Senior (ex: "RassurÃ©", "Prendre le temps"...)
- **Attendu :** 
  - `defiance: false` (sauf si score extrÃªme)
  - Agent Zero : Tempo `slow`, Scarcity `OFF`, Style `Security`

#### Test 2 â€” Banquier Pur
- **RÃ©ponses :** 4x Banquier (ex: "Chiffres", "RentabilitÃ©"...)
- **Attendu :**
  - Agent Zero : Tempo `methodical`, Scarcity `OFF`, Style `Analytical`

#### Test 3 â€” Standard Pur
- **RÃ©ponses :** 4x Standard (ex: "Concret", "Logique"...)
- **Attendu :**
  - Agent Zero : Tempo `methodical`, Scarcity `ON`, Style `Concrete`

#### Test 4 â€” Mode Opportuniste (Le Graal)
- **PrÃ©-requis :** Profil Standard + 0 Alertes + 0 Peurs
- **RÃ©ponses :** "Exemples concrets", "Retour rapide", "Bon moment", "Agir quand Ã©vident"
- **Attendu :**
  - `opportunity: true`
  - Agent Zero : Tempo `fast`, Scarcity `ON`, Style `Opportunity`
  - Parcours : Calendrier â†’ Budget (Ultra-court)

---

### PHASE 2 : VALIDATION DES ALERTES (3 TESTS)

#### Test 5 â€” Profil Incertain (Hybride)
- **RÃ©ponses :** Mix Senior (2) / Standard (1) / Banquier (1)
- **Attendu :**
  - `profileUncertain: true`
  - `incoherentAnswers: true` (si contradictions)
  - **Action :** Bascule Senior + Scarcity `OFF` + Confidence rÃ©duite (0.7)

#### Test 6 â€” Fatigue SuspectÃ©e
- **RÃ©ponses :** 2x Senior + 2x "Je ne sais pas"
- **Attendu :**
  - `fatigueSuspected: true`
  - **Action :** Tempo `slow` + Scarcity `OFF` + Mode DÃ©fiance possible (si Senior fort)

#### Test 7 â€” Fatigue Critique (ArrÃªt d'urgence)
- **RÃ©ponses :** 4x "Je ne sais pas"
- **Attendu :**
  - `fatigueCritical: true`
  - `fatigueCognitive: true` (Mode)
  - **Action :** Parcours MINIMAL (Admin â†’ Budget) + TOUT DÃ‰SACTIVÃ‰ (No Tooltips, No Compare)
  - Confidence : 0.6 (Seuil minimal)

---

## 69.2 CHECKLIST PRÃ‰-DÃ‰PLOIEMENT
- [x] Phase 1 (Profils) validÃ©e Ã  100%
- [x] Phase 2 (Alertes) validÃ©e Ã  100%
- [x] Mode Opportuniste s'active uniquement si conditions parfaites

---

## 69.2 CHECKLIST PRÃ‰-DÃ‰PLOIEMENT

- [ ] Test 1 â€” Fatigue cognitive (passÃ©)
- [ ] Test 2 â€” Contradictions (passÃ©)
- [ ] Test 3 â€” Banquier faible (passÃ©)
- [ ] Test 4 â€” Profil hybride (passÃ©)
- [ ] Test 5 â€” Agent Zero compense erreurs SPEECHVIEW (passÃ©)
- [ ] Logs auditables gÃ©nÃ©rÃ©s correctement
- [ ] Timestamp prÃ©sent dans ProfileDetectionResult
- [ ] Aucun texte gÃ©nÃ©rÃ© cÃ´tÃ© SPEECHVIEW
- [ ] Code commentÃ© et explicable

---

FIN SECTION 69

# SECTION 70 â€” INTÃ‰GRATION SPEECHVIEW â†’ AGENT ZERO

## 70.1 COMMENT AGENT ZERO UTILISE LES ALERTES

### Exemple de logique cÃ´tÃ© Agent Zero (Python)
```python
def decide(profile_result: ProfileDetectionResult) -> DecisionPlan:
    profile = profile_result["profile"]
    alerts = profile_result["alerts"]
    signals = profile_result["signals"]
    
    # 1. Bascule prudente si alertes critiques
    if alerts["fatigueCritical"] or alerts["incoherentAnswers"]:
        return DecisionPlan(
            moduleOrder=["securite", "garanties", "budget", "synthese"],
            presentationTempo="slow",
            enable={"scarcity": False, "comparisons": False},
            tooltipsEnabled=[],
            summaryStyle="institutional",
            reasoning={
                "triggers": ["fatigue_critical_detected"],
                "rulesApplied": ["force_prudence_mode"],
                "guardrailsActive": ["no_scarcity", "minimal_path"]
            }
        )
    
    # 2. Si profil incertain â†’ dÃ©sactiver leviers agressifs
    if alerts["profileUncertain"]:
        return DecisionPlan(
            moduleOrder=get_safe_module_order(profile),
            presentationTempo="slow",
            enable={"scarcity": False, "comparisons": True},
            tooltipsEnabled=["security"],
            summaryStyle="institutional",
            reasoning={
                "triggers": ["profile_uncertain"],
                "rulesApplied": ["disable_scarcity"],
                "guardrailsActive": ["no_aggressive_levers"]
            }
        )
    
    # 3. Logique normale
    return apply_normal_rules(profile, signals)
```

---

## 70.2 LOGS AUDITABLES (OBLIGATOIRE)

Chaque dÃ©tection SPEECHVIEW doit gÃ©nÃ©rer un log :
```json
{
  "timestamp": "2026-02-01T12:34:56Z",
  "profile": "senior",
  "rawScores": {
    "senior": 6,
    "banquier": 3,
    "standard": 2
  },
  "alerts": {
    "incoherentAnswers": false,
    "fatigueSuspected": false,
    "fatigueCritical": false,
    "profileUncertain": false,
    "banquierFaible": false
  },
  "neutralAnswersCount": 0,
  "agentDecision": {
    "moduleOrder": ["..."],
    "tempo": "slow",
    "reasoning": "..."
  }
}
```

---

FIN SECTION 70

# SECTION 71 â€” PROCÃ‰DURE ANTI-DÃ‰RIVE (GOUVERNANCE SPEECHVIEW)

## 71.1 PRINCIPE FONDAMENTAL

**Le danger n'est pas aujourd'hui. Il est dans 6â€“12 mois.**

Quand quelqu'un dira :
- "On pourrait ajouter juste un petit signal"
- "On pourrait affiner encore"
- "On pourrait deviner l'intention"

ğŸ‘‰ **Ces phrases ont dÃ©jÃ  cassÃ© des systÃ¨mes entiers.**

---

## 71.2 PROCESS DE MODIFICATION (OBLIGATOIRE)

Toute modification de SPEECHVIEW nÃ©cessite :

1. **Justification Ã©crite**
   - Quel problÃ¨me terrain observÃ© ?
   - Combien de cas documentÃ©s ?
   - Quel impact J+7 ?

2. **Analyse de risque**
   - Est-ce que Ã§a dÃ©place le pouvoir hors d'Agent Zero ?
   - Est-ce que Ã§a profils le client de maniÃ¨re sensible ?
   - Est-ce que Ã§a reste auditable ?

3. **Validation 5 questions**
   - RÃ©duction risque ? âœ…
   - Auditable ? âœ…
   - Pouvoir dans Agent Zero ? âœ…
   - Pas de profiling sensible ? âœ…
   - Assume l'incertitude ? âœ…

4. **Rollback documentÃ©**
   - Comment revenir en arriÃ¨re si erreur ?
   - Impact sur Agent Zero ?

**Sans ces 4 Ã©lÃ©ments â†’ modification interdite.**

---

## 71.3 SIGNAUX D'ALERTE ROUGE (DÃ‰RIVE EN COURS)

### Phrases interdites :
- "Juste pour ce client"
- "Temporairement"
- "On verra plus tard"
- "C'est qu'un signal"
- "Ã‡a ne change rien au core"

### Comportements interdits :
- Ajouter des signaux "forts positifs" ("prÃªt Ã  signer")
- InfÃ©rer des intentions cachÃ©es
- Adapter le discours en temps rÃ©el de maniÃ¨re agressive
- Rendre SPEECHVIEW configurable librement
- Expliquer toutes les rÃ¨gles au client

---

## 71.4 RÃˆGLE FINALE

Si tu hÃ©sites :
1. **ProtÃ¨ge la rÃ¨gle**
2. **ProtÃ¨ge l'audit**
3. **ProtÃ¨ge la sÃ©paration**

**Le reste est secondaire.**

---

FIN SECTION 71

---

# PARTIE 19 : MANIFESTE SYSTÃˆME v1.0 (LA SYNTHÃˆSE)

## 19.1 Ce qu'est Agent Zero (DÃ©finition Finale)
Agent Zero est un orchestrateur dÃ©cisionnel qui :
- observe le contexte utilisateur
- identifie un profil dÃ©cisionnel
- ajuste lâ€™ordre, la visibilitÃ© et lâ€™intensitÃ© des modules
- sans jamais modifier les chiffres
- sans jamais inventer du contenu

## 19.2 Ce qu'il n'est PAS
âŒ Un chatbot commercial
âŒ Un moteur de closing agressif
âŒ Un IA qui â€œconvaincâ€

## 19.3 RÃ¨gles Canoniques (Rappel SynthÃ©tique)
ğŸ”’ **RÃ¨gles absolues**
R1 â€” Agent Zero ne modifie jamais les chiffres
R2 â€” Agent Zero ne crÃ©e jamais de contenu chiffrÃ©
R3 â€” Agent Zero ne pousse jamais aprÃ¨s dÃ©cision
R4 â€” Toute dÃ©cision peut Ãªtre diffÃ©rÃ©e sans pÃ©nalitÃ©
R5 â€” Aucun module critique ne peut Ãªtre masquÃ© dÃ©finitivement

ğŸ§  **RÃ¨gles contextuelles**
R6 â€” Senior + fatigue â†’ modules denses, institutionnels
R7 â€” Profil analytique â†’ projection longue activÃ©e
R8 â€” IndÃ©cision prolongÃ©e â†’ affichage trajectoire, jamais dâ€™urgence

## 19.4 Invariants
- Les chiffres doivent rester vrais mÃªme si le client refuse
- Le systÃ¨me doit rester valide sans signature
- Aucun regret ne doit apparaÃ®tre Ã  J+7
- **Agent Zero protÃ¨ge le client ET le conseiller**

## 19.5 Tableau RÃ©capitulatif des Modules
| Module | RÃ´le | DÃ©cision directe | PilotÃ© par Agent Zero |
| :--- | :--- | :---: | :---: |
| Audit & Conso | Base factuelle | âŒ | âŒ |
| Budget Mensuel | Neutraliser le prix | âŒ | âš ï¸ |
| Garanties | SÃ©curisation mentale | âŒ | âœ… |
| Calendrier | Urgence neutre | âŒ | âš ï¸ |
| Lecture du Temps | CoÃ»t de lâ€™inaction | âŒ | âœ… |
| Projection 20 ans | VÃ©rification rationnelle | âŒ | âŒ |
| Signature | Acte formel | âœ… | âŒ |

---
---
**FIN IMMUTABLE**

---

# PARTIE 20 : MOTEUR DE DÃ‰CISION (PSEUDO-CODE CANONIQUE)

ğŸ‘‰ **Ceci est le cÅ“ur logique de l'IA (v1.0).**

## 20.1 Enums de Base
```typescript
enum Profile {
  ANALYTICAL, SENIOR, FATIGUE, DECISIVE, INDECISIVE, BANKER, NEUTRAL
}

enum State {
  EXPLORATION, COMPREHENSION, COMPARISON, TRAJECTORY, DECISION_READY, DECISION_MADE
}
```

## 20.2 DÃ©tection de Profil (Heuristique)
```typescript
function detectProfile(context): Profile {
  if (context.reOpenCount > 3 && context.timeSpent > 20min) return Profile.INDECISIVE;
  if (context.scrollStops > 10 && context.openedModules.includes("tableau")) return Profile.ANALYTICAL;
  if (context.inactivityTime > 90s) return Profile.FATIGUE;
  if (context.openedModules.length < 5 && context.timeSpent < 8min) return Profile.DECISIVE;
  return Profile.NEUTRAL;
}
```

## 20.3 DÃ©tection de l'Ã‰tat DÃ©cisionnel
```typescript
function detectState(context): State {
  if (context.openedModules.includes("decision-anchor")) return State.TRAJECTORY;
  if (context.openedModules.includes("bilan-total")) return State.COMPARISON;
  if (context.openedModules.length > 6) return State.COMPREHENSION;
  return State.EXPLORATION;
}
```

## 20.4 Orchestration des Modules
```typescript
function orchestrate(profile, state) {
  decisions = [];

  if (profile === Profile.FATIGUE) {
    decisions.push(show("decision-anchor"));
    decisions.push(hide("comparaison"));
  }

  if (profile === Profile.ANALYTICAL) {
    decisions.push(show("tableau-detaille"));
    decisions.push(unlock("projection-20-ans"));
  }

  if (profile === Profile.INDECISIVE && state === State.COMPARISON) {
    decisions.push(open("lecture-trajectoire"));
  }

  if (state === State.DECISION_MADE) {
    decisions.push(lockAllExcept("qualification"));
  }

  return decisions;
}
```

## 20.5 Audit Trail (Obligatoire)
```typescript
auditTrail = {
  profileDetected,
  stateReached,
  modulesShown,
  modulesHidden,
  decisionTimestamp,
  postDecisionFreeze: true // EmpÃªche toute influence aprÃ¨s le choix
}
```

---

# PARTIE 19 : OPS LAYER & GOUVERNANCE INTERNE (ADDENDUM V2)

<a name="section-68"></a>
## 68. LA MISSION OPS (INITIATIVE)
Agent Zero (Client) optimise la signature.
Agent Zero (Ops) sÃ©curise l'exÃ©cution.
Ce sont deux cerveaux distincts.
Jamais mÃ©langÃ©s.
Jamais interdÃ©pendants.

<a name="section-69"></a>
## 69. ARCHITECTURE DU MOTEUR OPS
### 69.1 Ops Rules (`ops.rules.ts`)
Source de vÃ©ritÃ© unique.
Contient les constantes mÃ©tier intouchables :
- `SRU_MAX_DAYS` (14j rÃ©tractation)
- `WAR_ROOM_RISK_SCORE` (0.6)
- `SILENCE_THRESHOLD_DAYS` (7j)

### 69.2 Ops Engine (`ops.engine.ts`)
Fonction pure : `evaluateOpsDecision(context)`.
Prend des faits. Rend un verdict.
Ne dÃ©cide PAS pour l'utilisateur.
Diagnostique le risque.

### 69.3 RÃ¨gle d'Or War Room
`is_war_room` est une propriÃ©tÃ© strictement dÃ©rivÃ©e.
**Formule :** `is_war_room = (ops_state IN ('SRU_EXPIRED', 'UNSECURED_DELAY'))`
Il est interdit d'entrer en War Room manuellement sans que le calcul Ops ne le valide.

<a name="section-70"></a>
## 70. STRATÃ‰GIE "MIRROR MODE" (PHASE D'OBSERVATION)
Avant de laisser l'Ops Engine bloquer quoi que ce soit, il opÃ¨re en "Mode Miroir".
- Il observe chaque dossier en arriÃ¨re-plan.
- Il loggue son verdict en console.
- Il NE TOUCHE PAS Ã  l'UI.
Objectif : Calibrer la vÃ©ritÃ© sans risquer le business.

<a name="section-71"></a>
## 71. OPS SNAPSHOT : LA VÃ‰RITÃ‰ BRUTE
Pour le Cockpit, nous avons banni les calculs frontend fragiles.
Nous utilisons une vue SQL `ops_snapshot` via `fetchOpsSnapshot`.
Principe :
- DB View calcule l'Ã©tat (Active, Silent, Secured).
- Frontend affiche bÃªtement.
- ZÃ©ro distorsion possible.
Le Cockpit devient un outil de preuve, pas d'interprÃ©tation.

<a name="section-72"></a>
## 72. OPS SCORING (INTELLIGENCE PASSIVE)

### 72.1 Philosophie
CrÃ©er une intelligence mesurable au-dessus de la donnÃ©e brute, sans effet de bord.
RÃ¨gle d'or : Scoring pur (input -> output). Aucune modification de DB.

### 72.2 Les 3 Scores
1. **Risk Ops Score (0-100)** : BasÃ© sur l'Ã©tat (Secured=0, SRU_Expired=90).
2. **Inertia Score (0-80)** : PÃ©nalise le temps mort (0 si <2j, 80 si >10j).
3. **Health Score (0-100)** : QualitÃ© globale (100 - pÃ©nalitÃ©s).

### 72.3 UtilitÃ©
- Priorisation automatique des relances.
- DÃ©tection des abandons silencieux.
- Vue macro pour le CEO.

---

# PARTIE 20 : ARCHITECTURE OPS AGENT (AXES)

<a name="section-73"></a>
## 73. LE CONCEPT "AXIS" (AGENT AUTONOME)
Jusqu'Ã  prÃ©sent, nous avions :
1.  **Agent Zero (Client)** : RÃ©agit aux actions utilisateur (Front).
2.  **Ops Engine (Scoring)** : Analyse passivement (Libs).

Voici le 3Ã¨me pilier : **OPS AGENT (Worker)**.
C'est un programme qui tourne en fond (`src/ops-agent/`).
Il ne "rÃ©pond" pas Ã  une requÃªte. Il **boucle**.

<a name="section-74"></a>
## 74. AXIS B (SURVEILLANCE POST-RDV)
**ProblÃ¨me :** Une fois le RDV fini, le systÃ¨me est aveugle.
**Solution :** Axis B surveille les dossiers `sent` mais non `signed`.

### 74.1 RÃ¨gles Axis B (`axes/axisB.ts`)
1.  **DÃ©tection Inertie** : Si `last_event > 7j` => Flag `MUET`.
2.  **DÃ©tection IntÃ©rÃªt** : Si `score > 60` => Flag `INTERESSE`.
3.  **DÃ©cision Automatique** :
    - `INTERESSE` + `MUET` -> Recommande **APPEL PRIORITAIRE**.
    - `MUET` -> Recommande **STOP RELANCE** (Ã©viter le harcÃ¨lement).

### 74.2 Isolation Totale
Ce code n'est importÃ© nulle part dans le Next.js client.
Il est conÃ§u pour Ãªtre exÃ©cutÃ© par un Worker NodeJS indÃ©pendant.

<a name="section-75"></a>
## 75. LES AUTRES AXES (A & C) & L'AGRÃ‰GATEUR
Pour couvrir tout le cycle de vie, l'Agent Ops gÃ¨re aussi :

### 75.1 Axis A (Dossiers SignÃ©s)
**Mission** : Anti-annulation & SÃ©curisation.
**RÃ¨gles** :
- `WAR_ROOM` : SRU dÃ©passÃ© sans acompte.
- `A_SECURISER` : Signature ancienne (> 7j) sans acompte.

### 75.2 Axis C (Qualif Leads)
**Mission** : Nettoyage avant RDV.
**RÃ¨gles** :
- `A_ABANDONNER` : > 30j sans interaction.
- `A_APPELER` : Lead rÃ©cent ou rÃ©actif (< 7j).

<a name="section-76"></a>
## 76. OPS AGENT AGGREGATOR (LE CHEF D'ORCHESTRE)
**Fichier :** `opsAgent.engine.ts`
**RÃ´le :**
1.  Prend une ligne de snapshot.
2.  Interroge Axis A, puis B, puis C (Cascade de prioritÃ©).
3.  Sort une `OpsDecision` unique (ex: `WAR_ROOM`, `PRIORITY`, `WATCH`, `STOP`).

C'est ce moteur qui tranche si un dossier est "A" ou "B" ou "C". Il garantit qu'on ne spam pas un client pour une qualification (C) s'il est dÃ©jÃ  en danger d'annulation (A).

---

<a name="section-77"></a>
## 77. VÃ‰RIFICATION VISUELLE (MOMENT OF TRUTH)
Le moteur Ops est invisible par nature. Mais pour le valider, nous l'avons branchÃ© temporairement dans le Cockpit.

### 77.1 Le Hook `useOpsAgent`
C'est le pont entre la donnÃ©e brute (`ops_snapshot`) et l'intelligence (`OpsAgent Engine`).
Il mappe chaque dossier via `evaluateOpsAgent` en temps rÃ©el.

### 77.2 L'Affichage "Moment de VÃ©ritÃ©"
Une section dÃ©diÃ©e en bas du Cockpit affiche dÃ©sormais :
- **PrioritÃ©** : ğŸ”´ WAR_ROOM / ğŸŸ  PRIORITY / ğŸŸ¡ WATCH / âš« STOP.
- **Source** : Quel Axe a pris la dÃ©cision (A, B ou C).
- **Recommendation** : La prochaine action humaine requise.

Cet affichage prouve que le moteur "voit" le business de la mÃªme maniÃ¨re qu'un humain Ops expÃ©rimentÃ©, sans jamais toucher Ã  la base de donnÃ©es.

---

<a name="section-78"></a>
## 78. MODE AUDIT (SHADOW WRITE)
L'Agent est conÃ§u pour Ãªtre juridiquement dÃ©fendable.
Chaque dÃ©cision qu'il prend (War Room, Stop, Watch) gÃ©nÃ¨re un objet `audit_payload`.

### 78.1 Le Concept Shadow Write
Avant de laisser l'agent "agir" (envoyer un email, bloquer un compte), on active le `Shadow Write`.
1.  L'agent calcule.
2.  L'agent **ne fait rien**.
3.  L'agent **Ã©crit** ce qu'il aurait fait dans une table de logs (`ops_agent_logs`).

Cela permet de vÃ©rifier sur 1 mois : "A-t-il voulu mettre en War Room ce client Ã  tort ?".

### 78.2 Statut Final (Produit Ready)
Le systÃ¨me est complet :
- **Snapshot** : Vision (SQL).
- **Engine** : RÃ©flexion (Rules).
- **Axes** : DÃ©cision (A, B, C).
- **Audit** : Trace (Shadow Write).

Il est prÃªt pour le dÃ©ploiement backend.

---

<a name="section-79"></a>
## 79. TABLEAU DES SEUILS DÃ‰FINITIFS â€” OPS SNAPSHOT (V1 GELÃ‰E)
**Statut :** CANONIQUE
Ce tableau dÃ©finit la vÃ©ritÃ© opÃ©rationnelle du systÃ¨me. Toute logique UI, scoring ou IA doit sâ€™y conformer.

### 79.1 AXE A â€” DOSSIERS SIGNÃ‰S (ANTI-ANNULATION)
**Objectif :** EmpÃªcher toute perte contractuelle Ã©vitable avant fin SRU.
**PÃ©rimÃ¨tre :** `status = 'signed'`

| Condition mÃ©tier | Seuil | ops_state | is_war_room | Commentaire |
| :--- | :--- | :--- | :--- | :--- |
| Acompte reÃ§u | `deposit_paid = true` | `SECURED` | `false` | CA sÃ©curisÃ© |
| < 7 jours depuis signature | `days < 7` | `ACTIVE` | `false` | Zone normale |
| 7 Ã  13 jours, sans acompte | `7 â‰¤ days < 14` | `UNSECURED_DELAY` | `true` | Zone de vigilance |
| â‰¥ 14 jours, sans acompte | `days â‰¥ 14` | `SRU_EXPIRED` | `true` | Risque maximal |
| Pas signÃ© | `status â‰  signed` | `HORS_PERIMETRE` | `false` | Exclu Axe A |

**ğŸ”’ RÃ¨gle figÃ©e :**
`is_war_room = ops_state IN ('UNSECURED_DELAY', 'SRU_EXPIRED')`

### 79.2 AXE B â€” POST-RDV (ANTI-INERTIE)
**Objectif :** EmpÃªcher la perte par inertie commerciale.
**PÃ©rimÃ¨tre :** `status = 'sent'`

| Condition mÃ©tier | Seuil | Ops PrioritÃ© | Commentaire |
| :--- | :--- | :--- | :--- |
| Interaction < 7 jours | `days < 7` | Normale | Lead vivant |
| 7 Ã  14 jours sans interaction | `7 â‰¤ days < 14` | WATCH | Ã€ surveiller |
| â‰¥ 14 jours sans interaction | `days â‰¥ 14` | PRIORITY_ACTION | Relance critique |
| Opt-out client | `email_optout = true` | STOP | Blocage lÃ©gal |

**ğŸ”’ RÃ¨gle figÃ©e :**
- Aucun mail / action automatique si STOP.
- SILENT â‰  mort â†’ action humaine requise.

### 79.3 AXE C â€” LEADS (HYGIÃˆNE)
**Objectif :** Nettoyer, prioriser, Ã©viter la pollution commerciale.
**PÃ©rimÃ¨tre :** `status = 'draft'`

| Condition mÃ©tier | Seuil | Action |
| :--- | :--- | :--- |
| Interaction < 7 jours | `< 7 jours` | A_APPELER |
| 7 Ã  30 jours sans interaction | `7â€“30 jours` | A_OBSERVER |
| > 30 jours sans interaction | `> 30 jours` | A_ABANDONNER |
| Opt-out | `email_optout = true` | STOP |

### 79.4 RÃˆGLES TRANSVERSES (NON NÃ‰GOCIABLES)
1.  **Source de vÃ©ritÃ©** : La vÃ©ritÃ© vient de la base (`ops_snapshot`). Jamais de calcul critique dans lâ€™UI.
2.  **SÃ©curitÃ© & conformitÃ©** :
    *   Acompte non obligatoire (sauf cash).
    *   Seuil SRU (14j) est absolu.
    *   Opt-out = STOP total (RGPD).
3.  **HiÃ©rarchie de prioritÃ©** : AXE A > AXE B > AXE C.

---
---

<a name="section-80"></a>
## 80. OPS UX AUDIT LAYER (DATA INTEGRITY)
**Concept :** Un auditeur neutre qui valide que l'interface ne trahit pas la donnÃ©e.

### 80.1 Pourquoi ?
Un graphique illisible ou trompeur est un risque opÃ©rationnel aussi grave qu'un calcul faux.
L'agent Ops doit garantir l'intÃ©gritÃ© du "Dernier MÃ¨tre" (l'affichage).

### 80.2 RÃ¨gles HardcodÃ©es
- **DensitÃ© max** : 30 points de donnÃ©es (au-delÃ  = bruit).
- **LisibilitÃ©** : Police < 12px = CRITICAL_ERROR.
- **Contraste** : OpacitÃ© < 0.6 = WARNING.

### 80.3 Fonctionnement
Le moteur `uxAudit.engine.ts` analyse les props des composants `Visx` et sort un **Score de ClartÃ©**.
Si le score < 60, le graphique est considÃ©rÃ© comme "Risque Cognitif".

### 80.4 Moteur de VÃ©ritÃ© (Data Integrity)
Un "Data Truth Firewall" compare les mÃ©tadonnÃ©es brutes Supabase vs ce qui est rendu.
Si `renderedMax < trueMax` ou si `pointsRendered < rows`, une alerte **ğŸš¨ DATA INTEGRITY BREACH** est levÃ©e.
Le dashboard avoue ses mensonges.

### 80.5 DÃ©tection CosmÃ©tique
Un graphique sans seuil critique ni zone de danger est taguÃ© **[COSMETIC]**.
Il informe le dÃ©cideur que la visualisation est purement informative et non dÃ©cisionnelle.

---
---

<a name="section-90"></a>
## 90. OPS CORE SECURITY (ANTI-COPY & AUDIT)
**Concept :** Verrouillage technique du systÃ¨me pour empÃªcher l'exploitation non autorisÃ©e.

### 90.1 Fingerprint & License Guard (`src/ops-core/`)
Le systÃ¨me calcule une signature unique (Fingerprint) basÃ©e sur le domaine, l'URL Supabase et un sel cryptographique.
Si le fingerprint ne correspond pas Ã  la licence autorisÃ©e (`license.guard.ts`), le systÃ¨me refuse de dÃ©marrer.
**Objectif :** EmpÃªcher le "fork silencieux" du code.

### 90.2 Integrity Check
Le moteur vÃ©rifie au dÃ©marrage que ses propres fichiers critiques n'ont pas Ã©tÃ© modifiÃ©s (`integrity.check.ts`).
Toute altÃ©ration du code source provoque un arrÃªt immÃ©diat ("ENGINE_TAMPERED").

### 90.3 Rapport d'Audit AutomatisÃ© (`src/ops-agent/audit/`)
Le systÃ¨me gÃ©nÃ¨re un rapport JSON formel (`/api/ops/audit`) pour la direction.
- **Score Global** : CalculÃ© sur l'UX et les Data Breaches.
- **Dette DÃ©cisionnelle** : Nombre de dossiers en WAR_ROOM non traitÃ©s.
- ** Preuve d'IntÃ©gritÃ©** : Liste des incohÃ©rences dÃ©tectÃ©es.

---
---

<a name="section-91"></a>
## 91. INDUSTRIALISATION & PREUVES (PHASE 2)
**Concept :** Transformer le code en produit livrable et auditable.

### 91.1 Moteur de Preuve PDF (`src/ops-agent/audit/audit.pdf.ts`)
Le systÃ¨me ne se contente plus d'un JSON. Il gÃ©nÃ¨re un document officiel.
- **Format** : PDF standardisÃ©, archivale.
- **Contenu** : Executive Summary, Scores couleurs, Liste dÃ©cisions critiques.
- **Usage** : Livrable pour CEO / Comex / Auditeurs externes.

### 91.2 Garde Pre-Production (`preprod.guard.ts`)
Un mÃ©canisme de blocage strict pour empÃªcher le dÃ©ploiement de code "menteur".
- **Condition** : `if (UX < 60 || DataBreach > 0) throw ERROR`.
- **Effet** : Impossible de pousser en prod un dashboard biaisÃ©.
- **Valeur** : Garantie contractuelle de qualitÃ©.

### 91.3 API de TÃ©lÃ©chargement (`/api/ops/audit/download`)
Route API publique permettant de rÃ©cupÃ©rer le rapport PDF Ã  la volÃ©e.
Permet une dÃ©monstration "ZÃ©ro triche" en temps rÃ©el.

---
---

<a name="section-92"></a>
## 92. OPS UX AUDIT ARCHITECTURE (MODULARITY V4.0)
**Concept :** SÃ©paration stricte des responsabilitÃ©s d'audit.

### 92.1 Structure Canonique (`src/ops-ux-audit/`)
L'audit n'est plus un monolithe, mais une fÃ©dÃ©ration d'experts spÃ©cialisÃ©s.

| Dossier | RÃ´le | Exemple |
| :--- | :--- | :--- |
| `engine/` | **Le Cerveau** | Orchestrateur, Types, Historique. |
| `charts/` | **Les SpÃ©cialistes** | `financialRisk.audit.ts` (1 fichier = 1 graph). |
| `cards/` | **Les KPI** | `kpiCards.audit.ts` (Surcharge cognitive). |
| `truth/` | **Le Firewall** | `dataVsRender.audit.ts` (IntÃ©gritÃ© Data). |

### 92.2 RÃ¨gle d'Or : "Pas d'Opinion, Juste des Faits"
Chaque auditeur (`.audit.ts`) est une fonction pure qui prend des mÃ©tadonnÃ©es et renvoie :
- Un Score (0-100).
- Des Issues (`severity`, `message`, `recommendation`).
**Aucun composant React n'a le droit de s'auto-valider.**

---
**FIN DEFINITIVE DU DOCUMENT (V4.1 - ARCHITECTURE MODULAIRE)**
